(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/business/cityJoin/cityJoin"],{"4cf1":function(e,n,t){"use strict";t.r(n);var o=t("6be8"),r=t("ae5a");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("5da8");var i=t("828b"),u=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=u.exports},"5da8":function(e,n,t){"use strict";var o=t("8008"),r=t.n(o);r.a},"6be8":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return o}));var o={"u-Form":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--form/u--form")]).then(t.bind(null,"c453"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"a892"))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,"c454"))},"u-Textarea":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(t.bind(null,"8f33"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"8103"))}},r=function(){var e=this.$createElement;this._self._c},a=[]},8008:function(e,n,t){},ae5a:function(e,n,t){"use strict";t.r(n);var o=t("d82d"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},c115:function(e,n,t){"use strict";(function(e,n){var o=t("47a9");t("34db"),t("3c60"),t("c891"),t("861b");o(t("3240"));var r=o(t("4cf1"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},d82d:function(e,n,t){"use strict";(function(e,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{showSex:!1,showPicker:!1,formData:{merchantName:"",phone:"",city:"",remark:"",agree:[]},servicePhone:"",showModal:!1,checkboxList:[{name:"同意并遵守",disabled:!1}],rules:{merchantName:{type:"string",required:!0,message:"请填写姓名",trigger:["blur","change"]},phone:{type:"string",required:!0,message:"请填写手机号",trigger:["blur","change"]},city:{type:"string",required:!0,message:"请输入合作城市",trigger:["blur","change"]},agree:{type:"array",required:!0,message:"请同意协议",trigger:["change"]}},loading:!1}},onLoad:function(){},computed:{cityJoinBannerUrl:function(){var n=e.getStorageSync("basicInformation");return n?n.cityJoinBanner.url:""}},methods:{fetchImageUrl:function(){var e=this;t.callFunction({name:"getBasicInformation",data:{isEnable:!0},success:function(n){console.log("res: ",n.result.data[0].cityJoin.url),e.imageUrl=n.result.data[0].cityJoin.url},fail:function(e){console.error("获取图片URL失败:",e)}})},submitForm:function(){var n=this;this.$refs.uForm.validate().then((function(){e.showLoading({title:"提交中..."}),console.log("表单数据:",n.formData),t.callFunction({name:"cityJoin",data:{methods:"addMerchant",merchantName:n.formData.merchantName,phone:n.formData.phone,city:n.formData.city,workerNumber:n.formData.workerNumber,classType:"",navigationAddress:"",latitude:"",longitude:"",province:"",level:0,remark:n.formData.remark,isEnable:!0}}).then((function(n){console.log("云函数返回结果:",n),e.hideLoading(),n.result&&200===n.result.code?e.showToast({title:"提交成功",icon:"success"}):e.showToast({title:"已提交，请勿重复提交",icon:"none"})})).catch((function(n){console.error("云函数调用失败:",n),e.hideLoading(),e.showToast({title:"提交失败，请重试",icon:"none"})}))})).catch((function(){e.showToast({title:"请检查表单输入",icon:"none"})}))},checkboxChange:function(e){console.log("change",e),this.formData.agree=e,console.log("formData.agree:",JSON.parse(JSON.stringify(this.formData.agree)))},confirm:function(){this.formData.agree=["同意并遵守"],this.formData.agree=JSON.parse(JSON.stringify(this.formData.agree)),console.log("confirm formData.agree:",JSON.parse(JSON.stringify(this.formData.agree))),this.showModal=!1},cancel:function(){this.showModal=!1},goto:function(n){e.navigateTo({url:n})}},onReady:function(){this.$refs.uForm.setRules(this.rules)}};n.default=o}).call(this,t("df3c")["default"],t("861b")["uniCloud"])}},[["c115","common/runtime","common/vendor"]]]);