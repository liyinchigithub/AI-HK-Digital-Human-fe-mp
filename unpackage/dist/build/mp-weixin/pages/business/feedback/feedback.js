(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/business/feedback/feedback"],{3399:function(n,e,o){"use strict";o.r(e);var t=o("35ea"),i=o("dac3");for(var u in i)["default"].indexOf(u)<0&&function(n){o.d(e,n,(function(){return i[n]}))}(u);o("6345");var c=o("828b"),a=Object(c["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);e["default"]=a.exports},"35ea":function(n,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return u})),o.d(e,"a",(function(){return t}));var t={"u-Form":function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u--form/u--form")]).then(o.bind(null,"c453"))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,"a892"))},"u-Textarea":function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(o.bind(null,"8f33"))},"u-Input":function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u--input/u--input")]).then(o.bind(null,"c454"))},uniSection:function(){return o.e("uni_modules/uni-section/components/uni-section/uni-section").then(o.bind(null,"df0c"))},uniFilePicker:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(o.bind(null,"4923"))},uButton:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-button/u-button")]).then(o.bind(null,"8103"))}},i=function(){var n=this.$createElement;this._self._c},u=[]},"48d5":function(n,e,o){},6345:function(n,e,o){"use strict";var t=o("48d5"),i=o.n(t);i.a},d042:function(n,e,o){"use strict";(function(n,t){var i=o("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=i(o("7ca3")),c={data:function(){return{formData:{description:"",phone:"",photos:[]},imageValue:[],rules:{description:{type:"string",required:!0,message:"请填写描述内容",trigger:["blur","change"]},phone:(0,u.default)({type:"string",required:!0,message:"请填写联系电话",trigger:["blur","change"],pattern:/^1[3-9]\d{9}$/},"message","请输入有效的11位手机号")},openID:""}},onLoad:function(){this.openID=n.getStorageSync("openID")},methods:{select:function(n){console.log("选择文件：",n)},progress:function(n){console.log("上传进度：",n)},generateCloudPath:function(n){var e=Date.now(),o="feedback-".concat(e,".").concat(n.extname);return"feedback/".concat(o)},success:function(n){console.log("上传成功");var e=n.tempFiles.map((function(n){return{extname:n.extname,fileType:n.fileType,image:n.image,name:n.name,path:n.path,size:n.size,fileID:n.fileID,url:n.url,uuid:n.uuid,status:n.status,cloudPath:n.cloudPath}}));this.formData.photos=e,console.log("this.formData.photos",this.formData.photos)},fail:function(e){console.log("上传失败：",e),n.showToast({title:"照片上传失败，请联系客服",icon:"none"})},submitForm:function(){var e=this;this.$refs.uForm.validate().then((function(){n.showLoading({title:"提交中..."}),console.log("表单数据:",e.formData),t.callFunction({name:"feedback",data:{description:e.formData.description,phone:e.formData.phone,photos:e.formData.photos,openID:e.openID}}).then((function(e){console.log("云函数调用结果:",e),n.hideLoading(),200===e.result.code?n.showToast({title:"提交成功",icon:"success"}):n.showToast({title:"提交失败，请重试",icon:"none"})})).catch((function(e){console.error("云函数调用失败:",e),n.hideLoading(),n.showToast({title:"提交失败，请重试",icon:"none"})}))})).catch((function(){n.showToast({title:"请检查表单输入",icon:"none"})}))},goto:function(e){n.navigateTo({url:e})}}};e.default=c}).call(this,o("df3c")["default"],o("861b")["uniCloud"])},dac3:function(n,e,o){"use strict";o.r(e);var t=o("d042"),i=o.n(t);for(var u in t)["default"].indexOf(u)<0&&function(n){o.d(e,n,(function(){return t[n]}))}(u);e["default"]=i.a},fc26:function(n,e,o){"use strict";(function(n,e){var t=o("47a9");o("34db"),o("3c60"),o("c891"),o("861b");t(o("3240"));var i=t(o("3399"));n.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])}},[["fc26","common/runtime","common/vendor"]]]);