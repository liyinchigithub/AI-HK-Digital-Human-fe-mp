(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/business/workerDetail/workerDetail"],{"08d3":function(e,o,t){},"4a35":function(e,o,t){"use strict";(function(e,n){var r=t("47a9");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=r(t("7ca3"));function a(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?a(Object(t),!0).forEach((function(o){(0,i.default)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var l={data:function(){return{workerID:"",workerDetailData:{title:"加载中"},isNoInventory:!1,isCollected:!1,overlayShow:!1,overlayText:"",imgHeight:0,sharerOpenID:"",sharerworkerID:"",comments:[{user:"人*",rating:5,date:"2025-01-01",content:"点她不会踩雷",tags:["热情礼貌","着装规范","服务态度好","服务耐心"]}],pageNum:1,pageSize:4,hasMoreComments:!0}},methods:{getCommentsWorkerData:function(o){var t=this;e.callFunction({name:"comments",data:{methods:"getCommentsWorkerDetail",workerID:o,pageNum:this.pageNum,pageSize:this.pageSize},success:function(e){t.comments=e.result.data||[]},fail:function(e){console.log("getCommentsWorkerDetail err",e)}})},getWorkerDetailData:function(o){var t=this;console.log("getWorkerDetailData workerID:",o),n.showNavigationBarLoading(),e.callFunction({name:"worker",data:{methods:"getWorkersDetail",workerID:o}}).then((function(e){t.loadingText="",t.workerDetailData=e.result.data[0],n.setStorageSync("workerID",o),n.hideNavigationBarLoading(),t.isShowCollected(o)})).catch((function(e){console.log(e)}))},timestampToDate:function(e){var o=new Date(1e3*Number(e));return isNaN(o.getTime())?"未知日期":o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()},previewImageSingle:function(e){n.previewImage({current:0,urls:[e],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},previewImageMultiple:function(e){var o=e.map((function(e){return e.url}));n.previewImage({current:0,urls:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},onImgLoad:function(e){var o=e.mp.detail,t=o.width,n=o.height;this.imgHeight=n/t*100},showToast:function(e){this.$refs.uToast.show(u(u({},e),{},{complete:function(){}}))},goto:function(e){""!=n.getStorageSync("openID")&&void 0!=n.getStorageSync("openID")&&""!=n.getStorageSync("userID")&&void 0!=n.getStorageSync("userID")?n.navigateTo({url:e}):n.navigateTo({url:"/pages/business/login/login"})},shareFriend:function(){},shareFriendQuan:function(){},customerService:function(){},isShowCollected:function(o){var t=this;e.callFunction({name:"getIsCollectWorkerStatus",data:{workerID:o,openID:n.getStorageSync("openID"),userID:n.getStorageSync("userID"),isEnable:!0},success:function(e){1==e.result.data.isCollected?(t.isCollected=!0,console.log("收藏")):(t.isCollected=!1,console.log("未收藏"))}})},collect:function(){var o=this;this.overlayShow=!0,0==this.isCollected?e.callFunction({name:"collectWorker",data:{methods:"addCollectWorker",openID:n.getStorageSync("openID"),userID:n.getStorageSync("userID"),workerID:this.workerID,workerPhoto:this.workerDetailData.workPhoto,lifePhoto:this.workerDetailData.lifePhoto},success:function(e){o.isCollected=e.result.data.isCollected,o.overlayShow=!1,o.overlayText="收藏成功"},fail:function(e){o.overlayShow=!1,o.overlayText="收藏失败"}}):e.callFunction({name:"collectWorker",data:{methods:"deleteCollectWorker",openID:n.getStorageSync("openID"),userID:n.getStorageSync("userID"),workerID:this.workerID},success:function(e){o.isCollected=!1,o.overlayShow=!1,o.overlayText="取消收藏"},fail:function(e){o.overlayShow=!1,o.overlayText="取消收藏失败"}})},loadMoreComments:function(){var o=this;this.hasMoreComments&&(this.pageNum+=1,e.callFunction({name:"comments",data:{methods:"getCommentsWorkerDetail",workerID:this.workerID,pageNum:this.pageNum,pageSize:this.pageSize},success:function(e){var t=e.result.data||[];t.length<o.pageSize&&(o.hasMoreComments=!1),o.comments=o.comments.concat(t)},fail:function(e){console.log("getCommentsWorkerDetail err",e)}}))}},watch:{isCollected:function(e,o){console.log("isCollected oldVal:",o),console.log("isCollected newVal:",e)}},onLoad:function(e){this.workerID=e.workerID,console.log("options.workerID:",this.workerID),this.getWorkerDetailData(this.workerID),this.getCommentsWorkerData(this.workerID);var o=n.getLaunchOptionsSync();console.log("workerDetail onLoad launchOptions",o.query),n.setStorageSync("sharerInfo",o.query);var t=o.query;void 0==t.sharerOpenID||""==t.sharerOpenID?console.log("没有分享ID"):(this.sharerOpenID=t.sharerOpenID,this.shareworkerID=t.workerID,console.log("sharerOpenID:",this.sharerOpenID),console.log("shareworkerID",this.shareworkerID)),console.log("当前页面:workerDetailData"),console.log("options.workerID:",e.workerID),this.workerID=e.workerID},onReachBottom:function(){this.loadMoreComments()},onShareAppMessage:function(){return{title:this.workerDetailData.title,path:"/pages/business/workerDetail/workerDetail?workerID=".concat(this.workerID,"&sharerOpenID=").concat(n.getStorageSync("openID"))}},onShareTimeline:function(){return{title:this.workerDetailData.title,path:"/pages/business/workerDetail",query:"workerID=".concat(this.workerID,"&sharerOpenID=").concat(n.getStorageSync("openID")),imageUrl:this.workerDetailData["image"]["url"]}},created:function(){},mounted:function(){this.isCollected=!1},destroyed:function(){this.isCollected=!1}};o.default=l}).call(this,t("861b")["uniCloud"],t("df3c")["default"])},"55f2":function(e,o,t){"use strict";t.d(o,"b",(function(){return r})),t.d(o,"c",(function(){return i})),t.d(o,"a",(function(){return n}));var n={uOverlay:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-overlay/u-overlay")]).then(t.bind(null,"ff06"))},uniCard:function(){return t.e("uni_modules/uni-card/components/uni-card/uni-card").then(t.bind(null,"2d19"))},"u-Image":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--image/u--image")]).then(t.bind(null,"494a"))},"u-Text":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--text/u--text")]).then(t.bind(null,"2e88"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"47d7"))},uRate:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-rate/u-rate")]).then(t.bind(null,"7c10"))},uRow:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-row/u-row")]).then(t.bind(null,"926a"))},uCol:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-col/u-col")]).then(t.bind(null,"7108"))},uGrid:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-grid/u-grid")]).then(t.bind(null,"e724"))},uGridItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-grid-item/u-grid-item")]).then(t.bind(null,"dd9c"))},uText:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-text/u-text")]).then(t.bind(null,"c419"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"8103"))}},r=function(){var e=this,o=e.$createElement,t=(e._self._c,e.comments.length),n=e.__map(e.comments,(function(o,t){var n=e.__get_orig(o),r=o.nickName?o.nickName.slice(0,1):null,i=o.created?e.timestampToDate(o.created):null;return{$orig:n,g1:r,m0:i}}));e._isMounted||(e.e0=function(o){e.overlayShow=!1}),e.$mp.data=Object.assign({},{$root:{g0:t,l0:n}})},i=[]},"8f4c":function(e,o,t){"use strict";(function(e,o){var n=t("47a9");t("34db"),t("3c60"),t("c891"),t("861b");n(t("3240"));var r=n(t("efe6"));e.__webpack_require_UNI_MP_PLUGIN__=t,o(r.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},ad36:function(e,o,t){"use strict";var n=t("08d3"),r=t.n(n);r.a},b43e:function(e,o,t){"use strict";t.r(o);var n=t("4a35"),r=t.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return n[e]}))}(i);o["default"]=r.a},efe6:function(e,o,t){"use strict";t.r(o);var n=t("55f2"),r=t("b43e");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(o,e,(function(){return r[e]}))}(i);t("ad36");var a=t("828b"),u=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);o["default"]=u.exports}},[["8f4c","common/runtime","common/vendor"]]]);