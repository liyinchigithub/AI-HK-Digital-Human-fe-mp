(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/business/address/address"],{2887:function(e,o,n){"use strict";n.r(o);var t=n("3219"),s=n("2caa");for(var i in s)["default"].indexOf(i)<0&&function(e){n.d(o,e,(function(){return s[e]}))}(i);n("5b14");var a=n("828b"),d=Object(a["a"])(s["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);o["default"]=d.exports},"2caa":function(e,o,n){"use strict";n.r(o);var t=n("8be2"),s=n.n(t);for(var i in t)["default"].indexOf(i)<0&&function(e){n.d(o,e,(function(){return t[e]}))}(i);o["default"]=s.a},3219:function(e,o,n){"use strict";n.d(o,"b",(function(){return s})),n.d(o,"c",(function(){return i})),n.d(o,"a",(function(){return t}));var t={uCellGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-cell-group/u-cell-group")]).then(n.bind(null,"4a31"))},uCell:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(n.bind(null,"e7db"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"5310"))},uSwipeAction:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swipe-action/u-swipe-action")]).then(n.bind(null,"24ce"))},uSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item")]).then(n.bind(null,"b033"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"90df"))},uBackTop:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-back-top/u-back-top")]).then(n.bind(null,"8985"))}},s=function(){var e=this.$createElement;this._self._c},i=[]},"5b14":function(e,o,n){"use strict";var t=n("92dd"),s=n.n(t);s.a},"8be2":function(e,o,n){"use strict";(function(e,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t={data:function(){return{address:"",pic:"",nickName:"",openID:"",screenHeight:0,screenWidth:0,isEmpty:!1,addressList:[],cancelText:"取消",confirmText:"确认",modalShow:!1,loadingText:"加载中...",scrollTop:0,mode:"fixed",iconStyle:"line",pageNum:1,pageSize:4,total:0,loading:!1,loadingMore:!1,loadingMoreLoading:!1,loadingMoreEnd:!1,loadingMoreEndLoading:!1,showModalTitle:"二次确认",showModalContent:"是否删除地址",options1:[{text:"删除",style:{backgroundColor:"#f56c6c"}}],swipeShow:!1,id:""}},onPullDownRefresh:function(){this.getMyAddressList()},onLoad:function(){console.log("当前页面:address"),this.openID=e.getStorageSync("openID"),this.userID=e.getStorageSync("userID"),this.getMyAddressList()},created:function(){},methods:{getWechatAddress:function(){var o=this;e.chooseAddress({success:function(t){console.log(t.userName),console.log(t.postalCode),console.log(t.provinceName),console.log(t.cityName),console.log(t.countyName),console.log(t.detailInfo),console.log(t.nationalCode),console.log(t.telNumber),o.address="".concat(t.provinceName).concat(t.cityName).concat(t.countyName).concat(t.detailInfo),n.callFunction({name:"address",data:{method:"addAddress",openID:o.openID,userID:o.userID,deliveryAddress:"",addressee:o.address,phone:t.telNumber,isEnable:!0},success:function(o){console.log("address addAddress:"+JSON.stringify(o)),e.startPullDownRefresh({success:function(){e.showToast({title:" 已更新"})}})},fail:function(e){console.error(e)},complete:function(){}})}})},swipeActionItemClick:function(e){this.modalShow=!0,this.id=e},showModalConfirm:function(){var e=this;this.modalShow=!1,this.deleteAddress(this.id),console.log("deleteAddress id:".concat(this.id)),setTimeout((function(){e.getMyAddressList()}),2e3)},showModalCancel:function(){this.modalShow=!1},scrolltolower:function(){this.getMore()},goto:function(o){e.navigateTo({url:o})},deleteAddress:function(o){var t=this;n.callFunction({name:"address",data:{method:"deleteAddress",_id:o},success:function(o){1==o.result.data.affectedDocs?e.startPullDownRefresh({success:function(){e.showToast({title:" 已更新"})},complete:function(){t.swipeShow=!1}}):e.showToast({title:"删除失败",icon:"none",duration:2e3}),e.hideNavigationBarLoading(),t.loadingText="加载更多",e.stopPullDownRefresh()}})},getMyAddressList:function(){this.pageNum=1,e.showNavigationBarLoading();var o=this;n.callFunction({name:"address",data:{method:"getAddress",pageNum:o.pageNum,pageSize:o.pageSize,isEnable:!0,userID:o.userID,openID:o.openID},success:function(n){console.log("getAddress request data",{method:"getAddress",pageNum:o.pageNum,pageSize:o.pageSize,isEnable:!0,userID:o.userID,openID:o.openID}),o.addressList=n.result.data,console.log("that.addressList res:",n.result.data),0==o.addressList.length&&(o.isEmpty=!0),e.hideNavigationBarLoading(),o.loadingText="加载更多",e.stopPullDownRefresh()}})},getMore:function(){var o=this;if(""!=o.loadingText&&"加载更多"!=o.loadingText)return o.loadingText="到底啦~",!1;o.loadingText="加载中...",o.pageNum++,n.callFunction({name:"address",data:{method:"getAddress",userID:o.userID,openID:o.openID,pageNum:o.pageNum,pageSize:o.pageSize,isEnable:!0}}).then((function(n){if(o.loadingText="",console.log("getMore res：",n),o.addressList=o.addressList.concat(n.result.data),o.loadingText="加载更多",0==n.result.data.length)return 0==o.addressList.length&&(o.isEmpty=!0),e.hideNavigationBarLoading(),o.loadingText="已加载全部",!1;e.hideNavigationBarLoading(),e.stopPullDownRefresh()})).catch((function(e){console.log(e)}))}}};o.default=t}).call(this,n("df3c")["default"],n("861b")["uniCloud"])},"92dd":function(e,o,n){},f420:function(e,o,n){"use strict";(function(e,o){var t=n("47a9");n("34db"),n("3c60"),n("c891"),n("861b");t(n("3240"));var s=t(n("2887"));e.__webpack_require_UNI_MP_PLUGIN__=n,o(s.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["f420","common/runtime","common/vendor"]]]);