(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uni_modules-uni-id-pages-pages-userinfo-userinfo"],{"00eeb":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{style:{width:e.width,height:e.height},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.cSrc?n("v-uni-image",{style:{width:e.width,height:e.height},attrs:{src:e.cSrc,mode:e.mode}}):e._e()],1)},a=[]},"0226":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uniIdPagesAvatar:n("922f").default,uniList:n("77b0").default,uniListItem:n("79ba").default,uniIdPagesBindMobile:n("be79").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-content"},[n("v-uni-view",{staticClass:"avatar"},[n("uni-id-pages-avatar",{attrs:{width:"260rpx",height:"260rpx"}})],1),n("uni-list",[n("uni-list-item",{staticClass:"item",attrs:{title:"昵称",rightText:e.userInfo.nickname||"未设置",link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setNickname("")}}}),n("uni-list-item",{staticClass:"item",attrs:{title:"手机号",rightText:e.userInfo.mobile||"未绑定",link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMobile.apply(void 0,arguments)}}}),e.userInfo.email?n("uni-list-item",{staticClass:"item",attrs:{title:"电子邮箱",rightText:e.userInfo.email}}):e._e(),e.hasPwd?n("uni-list-item",{staticClass:"item",attrs:{title:"修改密码",link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePassword.apply(void 0,arguments)}}}):e._e()],1),n("uni-list",{staticClass:"mt10"},[n("uni-list-item",{attrs:{title:"注销账号",link:"navigateTo"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deactivate.apply(void 0,arguments)}}})],1),n("uni-popup",{ref:"dialog",attrs:{type:"dialog"}},[n("uni-popup-dialog",{attrs:{mode:"input",value:e.userInfo.nickname,title:"设置昵称",placeholder:"请输入要设置的昵称"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.setNickname.apply(void 0,arguments)}}})],1),n("uni-id-pages-bind-mobile",{ref:"bind-mobile-by-sms",on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMobileSuccess.apply(void 0,arguments)}}}),e.showLoginManage?[e.userInfo._id?n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.logout.apply(void 0,arguments)}}},[e._v("退出登录")]):n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("去登录")])]:e._e()],2)},o=[]},"0e85":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.store=t.mutations=void 0;var a=i(n("c7eb")),o=i(n("1da1"));n("b64b"),n("d3b7"),n("159b");var u=i(n("0fb2")),r=i(n("e143")),s=e.importObject("uni-id-co"),d=e.database(),c=d.collection("uni-id-users"),l=uni.getStorageSync("uni-id-pages-userInfo")||{};console.log(l);var f={userInfo:l,hasLogin:0!=Object.keys(l).length};console.log("data",f);var p={updateUserInfo:function(){var e=arguments,t=this;return(0,o.default)((0,a.default)().mark((function n(){var i,o;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],!i){n.next=5;break}c.where("_id==$env.uid").update(i).then((function(e){console.log(e),e.result.updated?(uni.showToast({title:"更新成功",icon:"none"}),t.setUserInfo(i)):uni.showToast({title:"没有改变",icon:"none"})})),n.next=17;break;case 5:return n.prev=5,n.next=8,c.where("'_id' == $cloudEnv_uid").field("mobile,nickname,username,email,avatar_file").get();case 8:o=n.sent,console.log("fromDbData",o.result.data),t.setUserInfo(o.result.data[0]),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](5),t.setUserInfo({},{cover:!0}),console.error(n.t0.message,n.t0.errCode);case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},setUserInfo:function(e){var t=arguments;return(0,o.default)((0,a.default)().mark((function n(){var i,o,u;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:{cover:!1},o=i.cover,console.log("set-userInfo",e),u=o?e:Object.assign(g.userInfo,e),g.userInfo=Object.assign({},u),g.hasLogin=0!=Object.keys(g.userInfo).length,console.log("store.userInfo",g.userInfo),uni.setStorage({key:"uni-id-pages-userInfo",data:g.userInfo}),n.abrupt("return",e);case 8:case"end":return n.stop()}}),n)})))()},logout:function(){var e=this;return(0,o.default)((0,a.default)().mark((function t(){var n,i;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.logout();case 2:uni.removeStorageSync("uni_id_token"),uni.setStorageSync("uni_id_token_expired",0),uni.redirectTo({url:"/".concat(null!==(n=null===(i=u.default.uniIdRouter)||void 0===i?void 0:i.loginPage)&&void 0!==n?n:"uni_modules/uni-id-pages/pages/login/login-withoutpwd")}),uni.$emit("uni-id-pages-logout"),e.setUserInfo({},{cover:!0});case 7:case"end":return t.stop()}}),t)})))()},loginSuccess:function(e){var t=e.showToast,n=void 0===t||t,i=e.toastText,a=void 0===i?"登录成功":i,o=e.autoBack,r=void 0===o||o,s=e.uniIdRedirectUrl,d=void 0===s?"":s;if(console.log({toastText:a,autoBack:r}),n&&uni.showToast({title:a,icon:"none"}),this.updateUserInfo(),uni.$emit("uni-id-pages-login-success"),r){var c=0,l=getCurrentPages();if(l.forEach((function(e,t){"login"==l[l.length-t-1].route.split("/")[3]&&c++})),console.log("判断需要返回几层:",l,c),d)return uni.reLaunch({url:d});if("weixin"==e.loginType)return console.log("window.history",window.history),window.history.go(-3);if(c){var f=u.default.pages[0];return uni.reLaunch({url:"/".concat(f.path)})}uni.navigateBack({delta:c})}}};t.mutations=p;var g=r.default.observable(f);t.store=g}).call(this,n("a9ff")["default"])},"2f16":function(e,t,n){"use strict";n.r(t);var i=n("00eeb"),a=n("7686");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=r.exports},"319e8":function(e,t,n){var i=n("883b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("fe65ef9a",i,!0,{sourceMap:!1,shadowMode:!1})},"31bc":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"\n.box[data-v-23a0245a]{overflow:hidden}\n.chooseAvatar[data-v-23a0245a]{\ndisplay:inline-block;box-sizing:border-box;\nborder:dotted 1px #ddd;border-radius:10px;text-align:center;padding:1px}.showBorder[data-v-23a0245a]{border:solid 1px #ddd}",""]),e.exports=t},"33bb":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("caad"),n("d3b7"),n("e9c4");var a=i(n("c7eb")),o=i(n("1da1")),u=n("0e85"),r={data:function(){return{isPC:!1}},props:{width:{type:String,default:function(){return"50px"}},height:{type:String,default:function(){return"50px"}},border:{type:Boolean,default:function(){return!1}}},mounted:function(){var e=this;return(0,o.default)((0,a.default)().mark((function t(){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isPC=!["ios","android"].includes(uni.getSystemInfoSync().platform),console.log(" this.isPC",e.isPC,uni.getSystemInfoSync().platform);case 2:case"end":return t.stop()}}),t)})))()},computed:{hasLogin:function(){return u.store.hasLogin},userInfo:function(){return u.store.userInfo},avatar_file:function(){return u.store.userInfo.avatar_file}},methods:{setAvatarFile:function(e){u.mutations.updateUserInfo({avatar_file:e})},uploadAvatarImg:function(t){var n=this;if(console.log(this.hasLogin),!this.hasLogin)return uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"});var i={quality:100,width:600,height:600,resize:!0};uni.chooseImage({count:1,crop:i,success:function(){var t=(0,o.default)((0,a.default)().mark((function t(o){var u,r,s,d,c,l;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(o),u=o.tempFiles[0],r={extname:u.name.split(".")[u.name.split(".").length-1]},s=o.tempFilePaths[0],n.isPC){t.next=6;break}return t.next=5,new Promise((function(e){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/cropImage/cropImage?path="+s+"&options=".concat(JSON.stringify(i)),animationType:"fade-in",events:{success:function(t){e(t)}},complete:function(e){console.log(e)}})}));case 5:s=t.sent;case 6:return console.log(n.userInfo),d=n.userInfo._id+""+Date.now(),r.name=d,uni.showLoading({title:"更新中",mask:!0}),t.next=12,e.uploadFile({filePath:s,cloudPath:d,fileType:"image"});case 12:c=t.sent,l=c.fileID,r.url=l,console.log({avatar_file:r}),uni.hideLoading(),n.setAvatarFile(r);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}}};t.default=r}).call(this,n("a9ff")["default"])},5486:function(e,t,n){"use strict";n.r(t);var i=n("caf6"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"5b2e":function(e,t,n){"use strict";var i=n("319e8"),a=n.n(i);a.a},"75ea":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={cloudImage:n("2f16").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"box",class:{showBorder:e.border},style:{width:e.width,height:e.height,lineHeight:e.height},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadAvatarImg.apply(void 0,arguments)}}},[e.avatar_file?n("cloud-image",{attrs:{src:e.avatar_file.url,width:e.width,height:e.height}}):n("uni-icons",{staticClass:"chooseAvatar",style:{width:e.width,height:e.height,lineHeight:e.height},attrs:{type:"plusempty",size:"30",color:"#dddddd"}})],1)},o=[]},7686:function(e,t,n){"use strict";n.r(t);var i=n("8d3b"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"7d46":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d3b7");var a=i(n("c7eb")),o=i(n("1da1")),u=e.database(),r=(u.collection("uni-id-users"),e.importObject("uni-id-co")),s={emits:["success"],computed:{},data:function(){return{}},methods:{beforeGetphonenumber:function(){return(0,o.default)((0,a.default)().mark((function t(){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){uni.showLoading({mask:!0}),wx.checkSession({success:function(){console.log("session_key 未过期"),t(),uni.hideLoading()},fail:function(){console.log("session_key 已经失效，正在执行更新"),wx.login({success:function(i){var a=i.code;e.importObject("uni-id-co",{customUI:!0}).loginByWeixin({code:a}).then((function(e){console.log(e),t()})).catch((function(e){console.log(e),n()})).finally((function(e){console.log(e),uni.hideLoading()}))},fail:function(e){console.error(e),n()}})}})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},bindMobileByMpWeixin:function(e){var t=this;return(0,o.default)((0,a.default)().mark((function n(){return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e),"getPhoneNumber:ok"!=e.detail.errMsg){n.next=8;break}return console.log(e.detail),n.next=5,t.beforeGetphonenumber();case 5:r.bindMobileByMpWeixin(e.detail).then((function(e){console.log(e),t.$emit("success")})).finally((function(e){t.closeMe()})),n.next=9;break;case 8:t.closeMe();case 9:case"end":return n.stop()}}),n)})))()},open:function(){var e=this;return(0,o.default)((0,a.default)().mark((function t(){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.popup.open();case 1:case"end":return t.stop()}}),t)})))()},closeMe:function(e){this.$refs.popup.close()}}};t.default=s}).call(this,n("a9ff")["default"])},"844f":function(e,t,n){var i=n("31bc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("23ddda3c",i,!0,{sourceMap:!1,shadowMode:!1})},"883b":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-box[data-v-1681dfa6]  .uni-input-input[type="password"]::-ms-reveal{display:none}.uni-content[data-v-1681dfa6]{padding:0 %?60?%}.login-logo[data-v-1681dfa6]{display:none}@media screen and (min-width:690px){.uni-content[data-v-1681dfa6]{margin:0 auto;position:relative;top:100px;padding:30px 40px 80px 40px;max-width:450px;max-height:450px;border-radius:10px;box-shadow:0 0 20px #efefef;background-color:#fff}.login-logo[data-v-1681dfa6]{display:flex;justify-content:center}.login-logo uni-image[data-v-1681dfa6]{width:60px;height:60px}.register-back[data-v-1681dfa6]{display:none}uni-button[data-v-1681dfa6]{padding-bottom:1px}}.uni-content uni-view[data-v-1681dfa6]{box-sizing:border-box}.title[data-v-1681dfa6]{display:flex;padding:18px 0;font-weight:800;flex-direction:column}.tip[data-v-1681dfa6]{display:flex;color:#bdbdc0;font-size:11px;margin:6px 0}.uni-content[data-v-1681dfa6]  .uni-easyinput__content,\n.input-box[data-v-1681dfa6]{height:44px;background-color:#f8f8f8!important;border-radius:0;font-size:14px;display:flex;flex:1}.link[data-v-1681dfa6]{color:#04498c;cursor:pointer}.uni-content[data-v-1681dfa6]  .uni-forms-item__inner{padding-bottom:8px}.uni-btn[data-v-1681dfa6]{text-align:center;height:40px;line-height:40px;margin:15px 0 0 0;color:#fff!important;border-radius:5px}.uni-body.uni_modules-uni-id-pages-pages-login-login-withoutpwd[data-v-1681dfa6]{height:auto!important}uni-view[data-v-1681dfa6]{display:flex}.box[data-v-1681dfa6]{background-color:#fff;height:200px;width:%?750?%;flex-direction:column;border-top-left-radius:15px;border-top-right-radius:15px}.headBox[data-v-1681dfa6]{padding:%?20?%;height:%?80?%;line-height:%?80?%;text-align:left;font-size:16px;color:#333;margin-left:%?15?%}.tip[data-v-1681dfa6]{color:#666;text-align:left;justify-content:center;margin:%?10?% %?30?%;font-size:18px}.btnBox[data-v-1681dfa6]{margin-top:%?45?%;justify-content:center;flex-direction:row}.close[data-v-1681dfa6],\n.agree[data-v-1681dfa6]{text-align:center;width:%?200?%;height:%?80?%;line-height:%?80?%;border-radius:5px;margin:0 %?20?%;font-size:14px}.close[data-v-1681dfa6]{color:#999;border-color:#eee;border-style:solid;border-width:1px;background-color:#fff}.close[data-v-1681dfa6]:active{color:#989898;background-color:#e2e2e2}.agree[data-v-1681dfa6]{color:#fff}.agree[data-v-1681dfa6]:active{background-color:#f5f5f6}',""]),e.exports=t},"8d3b":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("c7eb")),o=i(n("1da1")),u={name:"cloud-image",emits:["click"],props:{mode:{type:String,default:function(){return"widthFix"}},src:{default:function(){return""}},width:{type:String,default:function(){return"100rpx"}},height:{type:String,default:function(){return"100rpx"}}},watch:{src:{handler:function(t){var n=this;t&&"cloud://"==t.substring(0,8)?e.getTempFileURL({fileList:[t]}).then((function(e){n.cSrc=e.fileList[0].tempFileURL})):this.cSrc=t},immediate:!0}},mounted:function(){return(0,o.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onClick:function(){this.$emit("click")}},data:function(){return{cSrc:!1}}};t.default=u}).call(this,n("a9ff")["default"])},"8da3":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"box"},[n("v-uni-text",{staticClass:"headBox"},[e._v("绑定资料")]),n("v-uni-text",{staticClass:"tip"},[e._v("将一键获取你的手机号码绑定你的个人资料")]),n("v-uni-view",{staticClass:"btnBox"},[n("v-uni-text",{staticClass:"close",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeMe.apply(void 0,arguments)}}},[e._v("关闭")]),n("v-uni-button",{staticClass:"agree uni-btn",attrs:{type:"primary","open-type":"getPhoneNumber"},on:{getphonenumber:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMobileByMpWeixin.apply(void 0,arguments)}}},[e._v("获取")])],1)],1)],1)},a=[]},"922f":function(e,t,n){"use strict";n.r(t);var i=n("75ea"),a=n("fd35");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("9c42");var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"23a0245a",null,!1,i["a"],void 0);t["default"]=r.exports},9297:function(e,t,n){"use strict";n.r(t);var i=n("7d46"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"94cc":function(e,t,n){var i=n("c97f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("3b88421a",i,!0,{sourceMap:!1,shadowMode:!1})},"9c42":function(e,t,n){"use strict";var i=n("844f"),a=n.n(i);a.a},a914:function(e,t,n){"use strict";n.r(t);var i=n("0226"),a=n("5486");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("bb60");var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"5e5f43db",null,!1,i["a"],void 0);t["default"]=r.exports},bb60:function(e,t,n){"use strict";var i=n("94cc"),a=n.n(i);a.a},be79:function(e,t,n){"use strict";n.r(t);var i=n("8da3"),a=n("9297");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("5b2e");var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"1681dfa6",null,!1,i["a"],void 0);t["default"]=r.exports},c97f:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-box[data-v-5e5f43db]  .uni-input-input[type="password"]::-ms-reveal{display:none}.uni-content[data-v-5e5f43db]{padding:0 %?60?%}.login-logo[data-v-5e5f43db]{display:none}@media screen and (min-width:690px){.uni-content[data-v-5e5f43db]{margin:0 auto;position:relative;top:100px;padding:30px 40px 80px 40px;max-width:450px;max-height:450px;border-radius:10px;box-shadow:0 0 20px #efefef;background-color:#fff}.login-logo[data-v-5e5f43db]{display:flex;justify-content:center}.login-logo uni-image[data-v-5e5f43db]{width:60px;height:60px}.register-back[data-v-5e5f43db]{display:none}uni-button[data-v-5e5f43db]{padding-bottom:1px}}.uni-content uni-view[data-v-5e5f43db]{box-sizing:border-box}.title[data-v-5e5f43db]{display:flex;padding:18px 0;font-weight:800;flex-direction:column}.tip[data-v-5e5f43db]{display:flex;color:#bdbdc0;font-size:11px;margin:6px 0}.uni-content[data-v-5e5f43db]  .uni-easyinput__content,\n.input-box[data-v-5e5f43db]{height:44px;background-color:#f8f8f8!important;border-radius:0;font-size:14px;display:flex;flex:1}.link[data-v-5e5f43db]{color:#04498c;cursor:pointer}.uni-content[data-v-5e5f43db]  .uni-forms-item__inner{padding-bottom:8px}.uni-btn[data-v-5e5f43db]{text-align:center;height:40px;line-height:40px;margin:15px 0 0 0;color:#fff!important;border-radius:5px}.uni-body.uni_modules-uni-id-pages-pages-login-login-withoutpwd[data-v-5e5f43db]{height:auto!important}.uni-content[data-v-5e5f43db]{padding:0}uni-view[data-v-5e5f43db]{display:flex;box-sizing:border-box;flex-direction:column}@media screen and (min-width:690px){.uni-content[data-v-5e5f43db]{padding:0;max-width:690px;margin-left:calc(50% - 345px);border:none;max-height:none;border-radius:0;box-shadow:none}}.avatar[data-v-5e5f43db]{align-items:center;justify-content:center;margin:22px 0;width:100%}.item[data-v-5e5f43db]{flex:1;flex-direction:row;justify-content:space-between;align-items:center}uni-button[data-v-5e5f43db]{margin:10%;margin-top:40px;border-radius:0;background-color:#fff;width:80%}.mt10[data-v-5e5f43db]{margin-top:10px}',""]),e.exports=t},caf6:function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d3b7");var a=i(n("c7eb")),o=i(n("1da1")),u=n("0e85"),r=e.database(),s=(r.collection("uni-id-users"),e.importObject("uni-id-co")),d={computed:{userInfo:function(){return u.store.userInfo}},data:function(){return{univerifyStyle:{authButton:{title:"本机号码一键绑定"},otherLoginButton:{title:"其他号码绑定"}},hasPwd:!1,showLoginManage:!1}},onShow:function(){var e=this;return(0,o.default)((0,a.default)().mark((function t(){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.univerifyStyle.authButton.title="本机号码一键绑定",e.univerifyStyle.otherLoginButton.title="其他号码绑定";case 2:case"end":return t.stop()}}),t)})))()},onLoad:function(e){var t=this;return(0,o.default)((0,a.default)().mark((function n(){var i;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showLoginManage&&(t.showLoginManage=!0),n.next=3,s.getAccountInfo();case 3:i=n.sent,t.hasPwd=i.isPasswordSet;case 5:case"end":return n.stop()}}),n)})))()},methods:{login:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd",complete:function(e){console.log(e)}})},logout:function(){u.mutations.logout()},bindMobileSuccess:function(){u.mutations.updateUserInfo()},changePassword:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd",complete:function(e){console.log(e)}})},bindMobile:function(){this.bindMobileBySmsCode()},univerify:function(){var e=this;uni.login({provider:"univerify",univerifyStyle:this.univerifyStyle,success:function(){var e=(0,o.default)((0,a.default)().mark((function e(t){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.authResult),s.bindMobileByUniverify(t.authResult).then((function(e){console.log(e),u.mutations.updateUserInfo()})).catch((function(e){console.log(e)})).finally((function(e){console.log(e),uni.closeAuthView()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fail:function(t){console.log(t),"30002"!=t.code&&"30001"!=t.code||e.bindMobileBySmsCode()}})},bindMobileBySmsCode:function(){uni.navigateTo({url:"./bind-mobile/bind-mobile"})},setNickname:function(e){console.log(e),e?(u.mutations.updateUserInfo({nickname:e}),this.$refs.dialog.close()):this.$refs.dialog.open()},deactivate:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/deactivate/deactivate"})}}};t.default=d}).call(this,n("a9ff")["default"])},fd35:function(e,t,n){"use strict";n.r(t);var i=n("33bb"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a}}]);