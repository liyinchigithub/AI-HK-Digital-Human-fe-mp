(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-business-pay-pay"],{"0013":function(e,t,n){var o=n("7d06");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("967d").default;i("789eef86",o,!0,{sourceMap:!1,shadowMode:!1})},"60a5":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uniPay:n("4f42").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"app"},[n("v-uni-view",[n("v-uni-view",{staticClass:"label"},[e._v("支付单号：")]),n("v-uni-view",[n("v-uni-input",{model:{value:e.out_trade_no,callback:function(t){e.out_trade_no=t},expression:"out_trade_no"}})],1)],1),n("v-uni-view",[n("v-uni-view",{staticClass:"label"},[e._v("支付金额（单位分，100=1元）：")]),n("v-uni-view",[n("v-uni-input",{model:{value:e.total_fee,callback:function(t){e.total_fee=e._n(t)},expression:"total_fee"}})],1)],1),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open.apply(void 0,arguments)}}},[e._v("唤起收银台支付")]),n("v-uni-view",{staticClass:"tips"},[e._v("支付前，让用户自己选择微信还是支付宝")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createOrder("wxpay")}}},[e._v("直接发起微信支付")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createOrder("alipay")}}},[e._v("直接发起支付宝支付")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createQRcode("wxpay")}}},[e._v("生成独立支付二维码")]),n("v-uni-view",{staticClass:"tips"},[e._v("用于把生成的二维码放到自己写的页面中（组件不会弹窗，请从日志中查看二维码base64值）")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getOrder.apply(void 0,arguments)}}},[e._v("查询支付状态")]),"h5-weixin"===e.h5Env?n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getWeiXinJsCode("snsapi_base")}}},[e._v("公众号获取openid示例")]):e._e(),n("uni-pay",{ref:"uniPay",attrs:{adpid:e.adpid,"return-url":"/pages/order-detail/order-detail",logo:"/static/logo.png"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.onSuccess.apply(void 0,arguments)},create:function(t){arguments[0]=t=e.$handleEvent(t),e.onCreate.apply(void 0,arguments)}}})],1)},a=[]},"7d06":function(e,t,n){var o=n("c86c");t=o(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.app[data-v-219a735b]{padding:%?30?%}uni-input[data-v-219a735b]{border:1px solid #f3f3f3;padding:%?10?%}uni-button[data-v-219a735b]{margin-top:%?20?%}.label[data-v-219a735b]{margin:%?10?% 0}.tips[data-v-219a735b]{margin-top:%?20?%;font-size:%?24?%;color:#565656}',""]),e.exports=t},c57d:function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("2634")),a=o(n("2fdc"));n("01a2"),n("e39c"),n("c223"),n("5c47"),n("2c10");var r={data:function(){return{total_fee:1,order_no:"20221027011000101001010",out_trade_no:"2022102701100010100101001",description:"测试订单",type:"test",openid:"",custom:{a:"a",b:1},adpid:"1000000001"}},onLoad:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.code&&t.state&&setTimeout((function(){e.getOpenid({provider:"wxpay",code:t.code})}),300)},methods:{open:function(){this.order_no="test"+Date.now(),this.out_trade_no="".concat(this.order_no,"-1"),this.$refs.uniPay.open({total_fee:this.total_fee,order_no:this.order_no,out_trade_no:this.out_trade_no,description:this.description,type:this.type,qr_code:this.qr_code,openid:this.openid,custom:this.custom})},createOrder:function(e){this.order_no="test"+Date.now(),this.out_trade_no="".concat(this.order_no,"-1"),this.$refs.uniPay.createOrder({provider:e,total_fee:this.total_fee,order_no:this.order_no,out_trade_no:this.out_trade_no,description:this.description,type:this.type,qr_code:this.qr_code,openid:this.openid,custom:this.custom})},createQRcode:function(e){this.order_no="test"+Date.now(),this.out_trade_no="".concat(this.order_no,"-1"),this.$refs.uniPay.createOrder({provider:e,total_fee:this.total_fee,order_no:this.order_no,out_trade_no:this.out_trade_no,description:this.description,type:this.type,qr_code:!0,cancel_popup:!0,openid:this.openid,custom:this.custom})},getOrder:function(){var e=this;return(0,a.default)((0,i.default)().mark((function t(){var n,o;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uniPay.getOrder({out_trade_no:e.out_trade_no,await_notify:!0});case 2:n=t.sent,n&&(o={"-1":"已关闭",1:"已支付",0:"未支付",2:"已部分退款",3:"已全额退款"},uni.showToast({title:o[n.status]||n.errMsg,icon:"none"}));case 4:case"end":return t.stop()}}),t)})))()},refund:function(){var e=this;return(0,a.default)((0,i.default)().mark((function t(){var n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uniPay.refund({out_trade_no:e.out_trade_no});case 2:n=t.sent,n&&uni.showToast({title:n.errMsg,icon:"none"});case 4:case"end":return t.stop()}}),t)})))()},getRefund:function(){var e=this;return(0,a.default)((0,i.default)().mark((function t(){var n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uniPay.getRefund({out_trade_no:e.out_trade_no});case 2:n=t.sent,n&&uni.showModal({content:n.errMsg,showCancel:!1});case 4:case"end":return t.stop()}}),t)})))()},closeOrder:function(){var e=this;return(0,a.default)((0,i.default)().mark((function t(){var n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uniPay.closeOrder({out_trade_no:e.out_trade_no});case 2:n=t.sent,n&&uni.showModal({content:n.errMsg,showCancel:!1});case 4:case"end":return t.stop()}}),t)})))()},getWeiXinJsCode:function(){var e=arguments,t=this;return(0,a.default)((0,i.default)().mark((function n(){var o,a,r,s,c;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:"snsapi_base",n.next=3,t.$refs.uniPay.getProviderAppId({provider:"wxpay",provider_pay_type:"jsapi"});case 3:a=n.sent,a.appid&&(r=a.appid,s=window.location.href.split("?")[0],c="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(r,"&redirect_uri=").concat(s,"&response_type=code&scope=").concat(o,"&state=STATE#wechat_redirect"),window.location.href=c);case 5:case"end":return n.stop()}}),n)})))()},getOpenid:function(e){var t=this;return(0,a.default)((0,i.default)().mark((function n(){var o;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$refs.uniPay.getOpenid(e);case 2:o=n.sent,o&&(t.openid=o.openid,uni.showToast({title:"已获取到openid，可以开始支付",icon:"none"}));case 4:case"end":return n.stop()}}),n)})))()},onCreate:function(e){console.log("create: ",e)},onSuccess:function(e){console.log("success: ",e),e.user_order_success}},computed:{h5Env:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-weixin":"micromessenger"==e.match(/MicroMessenger/i)?"h5-weixin":"alipay"==e.match(/alipay/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-alipay":"alipay"==e.match(/alipay/i)?"h5-alipay":"h5"}}};t.default=r},cac2:function(e,t,n){"use strict";var o=n("0013"),i=n.n(o);i.a},d572:function(e,t,n){"use strict";n.r(t);var o=n("60a5"),i=n("e595");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("cac2");var r=n("828b"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"219a735b",null,!1,o["a"],void 0);t["default"]=s.exports},e595:function(e,t,n){"use strict";n.r(t);var o=n("c57d"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a}}]);