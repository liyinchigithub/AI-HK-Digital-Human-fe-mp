{"version":3,"sources":["uni-app:///main.js","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?466b","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?6764","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?3472","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?3ffd","uni-app:///pages/business/workerDetail/workerDetail.vue","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?a5f3","webpack:////Users/liyinchi/workspace/前端/Dcolud/AI-HK-Digital-Human-fe-mp/pages/business/workerDetail/workerDetail.vue?45c1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","workerID","workerDetailData","title","isNoInventory","isCollected","overlayShow","overlayText","imgHeight","sharerOpenID","sharerworkerID","comments","user","rating","date","content","tags","pageNum","pageSize","hasMoreComments","methods","getCommentsWorkerData","uniCloud","name","success","fail","console","getWorkerDetailData","uni","callFunction","then","catch","timestampToDate","previewImageSingle","current","urls","longPressActions","itemList","previewImageMultiple","onImgLoad","width","height","showToast","text","complete","goto","url","shareFriend","shareFriendQuan","customerService","isShowCollected","openID","userID","isEnable","collect","workerPhoto","lifePhoto","loadMoreComments","watch","onLoad","onReachBottom","onShareAppMessage","path","onShareTimeline","query","imageUrl","created","mounted","destroyed"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAAuD;AAA4E;AAC9L;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAAuD;AAGjHC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjHA;AAAA;AAAA;AAAA;AAAw2B,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgH53B;EACAC;IACA;MACAC;MAAA;MACA;MACAC;QACAC;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC,WACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,EACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACAC;QACAC;QACAvB;UACAoB;UACAnB;UACAgB;UACAC;QACA;QACAM;UACA;QACA;;QACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MACAD;MACA;MACAE;MACA;MACAN,SACAO;QACAN;QACAvB;UACAoB;UACAnB;QACA;MACA,GACA6B;QACA;QACA;QACA;QACA;QACAF;QACA;QACAA;QACA;QACA;MACA;MAAA,CACAG;QACAL;MACA;IACA;IACA;IACAM;MACA;MACA;MACA;QACA;MACA;;MACA;IACA;IACA;IACAC;MACAL;QACAM;QAAA;QACAC;QAAA;QACAC;UACAC;UACAb;YACAE;UACA;UACAD;YACAC;UACA;QACA;MACA;IACA;IACA;IACAY;MACA;QAAA;MAAA;MACAV;QACAM;QAAA;QACAC;QAAA;QACAC;UACAC;UACAb;YACAE;UACA;UACAD;YACAC;UACA;QACA;MACA;IACA;IACAa;MACA;MACA;QAAAC;QAAAC;MACA;IACA;IACA;IACAC;MACA,uDACAC;QACAC;UACA;UACA;UACA;QAAA;MACA,GACA;IACA;IACA;IACAC;MACA;MACA,IACAjB,sCACAA,6CACAA,sCACAA,2CACA;QACA;QACAA;UACAkB;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAlB;UACAkB;QACA;MACA;IACA;IACA;IACAC;IACA;IACAC;IACA;IACAC;MACA;IAAA,CACA;IACA;IACAC;MAAA;MACA5B;QACAC;QACAvB;UACAC;UACAkD;UACAC;UACAC;QACA;QACA7B;UACA;UACA;YACA;YACAE;UACA;YACA;YACAA;UACA;QACA;MACA;IACA;IACA;IACA4B;MAAA;MACA;MACA;MACA;MACA;QACA;QACAhC;UACAC;UACAvB;YACAoB;YACA+B;YACAC;YACAnD;YACAsD;YAAA;YACAC;YACA;UACA;;UACAhC;YACA;YACA;YACA;YACA;YACA;UACA;UACAC;YACA;YACA;YACA;UACA;QACA;MACA;QACA;QACAH;UACAC;UACAvB;YACAoB;YACA+B;YACAC;YACAnD;UACA;UACAuB;YACA;YACA;YACA;YACA;UACA;UACAC;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAgC;MAAA;MACA;MACA;MACAnC;QACAC;QACAvB;UACAoB;UACAnB;UACAgB;UACAC;QACA;QACAM;UACA;UACA;YACA;UACA;;UACA;QACA;;QACAC;UACAC;QACA;MACA;IACA;EACA;EACAgC;IACA;IACArD;MACAqB;MACAA;IACA;EACA;EACAiC;IACA;IACA;IACAjC;IACA;IACA;IACA;IACA;;IAEA;IACA;IACAA;IACA;IACAE;IACA;IACA;IACA;IACA;MACA;MACAF;IACA;MACA;MACA;MACAA;MACAA;IACA;;IAEA;IACAA;IACAA;IACA;EAEA;EACAkC;IACA;EACA;EACA;EACAC;IACA;IACA;MACA1D;MACA2D,2GACAlC;IACA;EACA;EACA;EACAmC;IACA;IACA;MACA5D;MACA2D;MACAE,qFACA,SACA;MACAC;IACA;EACA;EACAC;EACAC;IACA;EACA;EACAC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/cA;AAAA;AAAA;AAAA;AAA+lD,CAAgB,y6CAAG,EAAC,C;;;;;;;;;;;ACAnnD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/business/workerDetail/workerDetail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-cloud-stat.es.js';;import '@dcloudio/vue-cli-plugin-uni/packages/uni-push/dist/uni-push.es.js';import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/business/workerDetail/workerDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./workerDetail.vue?vue&type=template&id=68db76b9&\"\nvar renderjs\nimport script from \"./workerDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./workerDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./workerDetail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/business/workerDetail/workerDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./workerDetail.vue?vue&type=template&id=68db76b9&\"","var components\ntry {\n  components = {\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-card/components/uni-card/uni-card\" */ \"@/uni_modules/uni-card/components/uni-card/uni-card.vue\"\n      )\n    },\n    \"u-Image\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--image/u--image\" */ \"@/uni_modules/uview-ui/components/u--image/u--image.vue\"\n      )\n    },\n    \"u-Text\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--text/u--text\" */ \"@/uni_modules/uview-ui/components/u--text/u--text.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uRate: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-rate/u-rate\" */ \"@/uni_modules/uview-ui/components/u-rate/u-rate.vue\"\n      )\n    },\n    uRow: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-row/u-row\" */ \"@/uni_modules/uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-col/u-col\" */ \"@/uni_modules/uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uGrid: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-grid/u-grid\" */ \"@/uni_modules/uview-ui/components/u-grid/u-grid.vue\"\n      )\n    },\n    uGridItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-grid-item/u-grid-item\" */ \"@/uni_modules/uview-ui/components/u-grid-item/u-grid-item.vue\"\n      )\n    },\n    uText: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-text/u-text\" */ \"@/uni_modules/uview-ui/components/u-text/u-text.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.comments.length\n  var l0 = _vm.__map(_vm.comments, function (comment, index) {\n    var $orig = _vm.__get_orig(comment)\n    var g1 = comment.nickName ? comment.nickName.slice(0, 1) : null\n    var m0 = comment.created ? _vm.timestampToDate(comment.created) : null\n    return {\n      $orig: $orig,\n      g1: g1,\n      m0: m0,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.overlayShow = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./workerDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./workerDetail.vue?vue&type=script&lang=js&\"","<template>\n  <!-- 师傅详情页 -->\n  <view>\n    <view>\n      <!-- 遮罩 -->\n      <u-overlay :show=\"overlayShow\" @click=\"overlayShow = false\">\n        <view class=\"warp\">\n          <view class=\"rect\" @tap.stop>\n            {{ overlayText }}\n          </view>\n        </view>\n      </u-overlay>\n      <!-- 师傅 -->\n      <uni-card>\n        <!-- 师傅封面图片 -->\n        <view class=\"worker-img\">\n          <u--image :showLoading=\"true\" :src=\"workerDetailData['workPhoto'][0]['url']\" width=\"100%\" height=\"270px\"\n            @click=\"previewImageMultiple(workerDetailData.workPhoto)\">\n          </u--image>\n        </view>\n      </uni-card>\n      <view class=\"workerInfo\">\n        <!-- 师傅名称 -->\n        <view class=\"name-title\">\n          <text id=\"workerName\">{{ workerDetailData.username }}</text>\n          <text id=\"workerTitle\" style=\"font-size: 20rpx;\">中级精油SPA师</text>\n        </view>\n        <view class=\"attributes\">\n          <text>160cm</text>\n          <text>丰韵</text>\n          <text>天秤座</text>\n        </view>\n      </view>\n    </view>\n    <!-- 师傅简介 -->\n    <view class=\"content\">\n      <u--text :text=\"workerDetailData.selfInfo\" size=\"25\"></u--text>\n    </view>\n    <!-- 保障权益 -->\n    <view class=\"guarantee\">\n      <view class=\"icon-text\">\n        <u-icon name=\"lock\" color=\"#4D9FA4\" size=\"40\"></u-icon>\n        <text style=\"color: #000000;font-size: 25rpx;\">保障</text>\n      </view>\n      <view class=\"icon-text\">\n        <u-icon name=\"rmb\" color=\"#4D9FA4\" size=\"40\"></u-icon>\n        <text style=\"color: #484949;font-size: 25rpx;\">爽约包退</text>\n      </view>\n      <view class=\"icon-text\">\n        <u-icon name=\"integral\" color=\"#4D9FA4\" size=\"40\"></u-icon>\n        <text style=\"color: #484949;font-size: 25rpx;\">安心认证</text>\n      </view>\n      <view class=\"icon-text\">\n        <u-icon name=\"thumb-up\" color=\"#4D9FA4\" size=\"40\"></u-icon>\n        <text style=\"color: #484949;font-size: 25rpx;\">资质证书</text>\n      </view>\n    </view>\n    <!-- 评价列表 -->\n    <view class=\"comment\">\n      <view v-if=\"comments.length === 0\" class=\"no-comments\">\n        暂无评价\n      </view>\n      <view class=\"comment-list\">\n        <view class=\"comment-item\" v-for=\"(comment, index) in comments\" :key=\"index\">\n          <view class=\"comment-header\">\n            <!-- 脱敏nickName -->\n            <text class=\"comment-user\">\n              {{ comment.nickName ? (comment.nickName.slice(0, 1) + '***') : '匿名用户' }}\n            </text>\n            <u-rate :value=\"comment.rating || 0\" size=\"30\" inactive-color=\"#ff9900\"></u-rate>\n            <text class=\"comment-date\">{{ comment.created ? timestampToDate(comment.created) : '未知日期' }}</text>\n          </view>\n          <view class=\"comment-content\">\n            <text>{{ comment.content }}</text>\n          </view>\n          <view class=\"comment-tags\">\n            <view class=\"tag\" v-for=\"(tag, index) in (comment.tags || [])\" :key=\"index\">\n              {{ tag }}\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <!-- 立即预约 -->\n    <view class=\"nav\">\n      <u-row justify=\"flex-start\" gutter=\"6\" style=\"margin-top: 10upx\">\n        <u-col span=\"5\" customStyle=\"margin-left: 50rpx;\">\n          <u-grid :border=\"false\">\n            <u-grid-item @click=\"customerService()\">\n              <u-icon color=\"#409EFF\" name=\"kefu-ermai\" size=\"35\"></u-icon>\n              <u-text size=\"35\" text=\"客服\" align=\"center\"></u-text>\n            </u-grid-item>\n            <u-grid-item @click=\"collect()\">\n              <u-icon v-if=\"!isCollected\" name=\"heart\" size=\"35\"></u-icon>\n              <u-icon color=\"#F56C6C\" v-if=\"isCollected\" name=\"heart-fill\" size=\"35\"></u-icon>\n              <u-text size=\"35\" text=\"收藏\" align=\"center\"></u-text>\n            </u-grid-item>\n          </u-grid>\n        </u-col>\n        <u-col span=\"6\" style=\"margin-right: 20rpx;\">\n          <u-button class=\"custom-style\" type=\"primary\" text=\"立即预约\" color=\"#71d5a1\" size=\"large\" @click=\"\n            goto(\n              `/pages/business/payOrder/payOrder?goodsID=${this.goodsID}&goodsNum=1`\n            )\n            \"></u-button>\n        </u-col>\n      </u-row>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      workerID: \"\", // 师傅ID\n      // 师傅数据\n      workerDetailData: {\n        title: \"加载中\",\n      },\n      // 是否显示无库存按钮\n      isNoInventory: false,\n      // 收藏icon\n      isCollected: false,\n      // 遮罩\n      overlayShow: false,\n      // 遮罩文本\n      overlayText: \"\",\n      // 其他图片高度\n      imgHeight: 0,\n      // 分享者（邀请人）\n      sharerOpenID: \"\",\n      // 分享师傅\n      sharerworkerID: \"\",\n      // 评价列表\n      comments: [\n        {\n          user: \"人*\",\n          rating: 5,\n          date: \"2025-01-01\",\n          content: \"点她不会踩雷\",\n          tags: [\"热情礼貌\", \"着装规范\", \"服务态度好\", \"服务耐心\"],\n        }\n      ],\n      // 评价页数\n      pageNum: 1,\n      // 评价页大小\n      pageSize: 4,\n      // 是否有更多评价\n      hasMoreComments: true,\n    };\n  },\n  methods: {\n    // 获取评价数据\n    getCommentsWorkerData(workerID) {\n      uniCloud.callFunction({\n        name: \"comments\",\n        data: {\n          methods: \"getCommentsWorkerDetail\",\n          workerID: workerID,\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n        },\n        success: (res) => {\n          this.comments = res.result.data || []; // 确保comments为数组\n        },\n        fail: (err) => {\n          console.log(\"getCommentsWorkerDetail err\", err);\n        },\n      });\n    },\n    // 获取师傅数据\n    getWorkerDetailData(workerID) {\n      console.log(\"getWorkerDetailData workerID:\", workerID);\n      //在当前页面显示导航条加载动画。\n      uni.showNavigationBarLoading();\n      // 调用云函数，获取列表\n      uniCloud\n        .callFunction({\n          name: \"worker\",\n          data: {\n            methods: \"getWorkersDetail\",\n            workerID: workerID, // 师傅ID\n          },\n        })\n        .then((res) => {\n          this.loadingText = \"\";\n          // 师傅信息\n          this.workerDetailData = res.result.data[0];\n          // 缓存存储师傅ID\n          uni.setStorageSync(\"workerID\", workerID),\n            // 隐藏loading\n            uni.hideNavigationBarLoading();\n          // 查询该师傅用户是否收藏\n          this.isShowCollected(workerID);\n        }) // success\n        .catch((err) => {\n          console.log(err);\n        }); // fail\n    },\n    // 时间戳转年月日\n    timestampToDate(timestamp) {\n      // 确保时间戳是数字，并且是毫秒数\n      const date = new Date(Number(timestamp) * 1000); // 如果是秒数，乘以1000转换为毫秒数\n      if (isNaN(date.getTime())) {\n        return '未知日期'; // 如果日期无效，返回默认值\n      }\n      return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    },\n    // 预览图片单张（普通图片点击事件）\n    previewImageSingle(url) {\n      uni.previewImage({\n        current: 0, // 当前显示图片的索引\n        urls: [url], // 需要预览的图片http链接列表\n        longPressActions: {\n          itemList: ['发送给朋友', '保存图片', '收藏'],\n          success: function (data) {\n            console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\n          },\n          fail: function (err) {\n            console.log(err.errMsg);\n          }\n        }\n      });\n    },\n    // 预览图片多张\n    previewImageMultiple(images) {\n      const urls = images.map(img => img.url);\n      uni.previewImage({\n        current: 0, // 当前显示图片的索引\n        urls: urls, // 需要预览的图片http链接列表\n        longPressActions: {\n          itemList: ['发送给朋友', '保存图片', '收藏'],\n          success: function (data) {\n            console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\n          },\n          fail: function (err) {\n            console.log(err.errMsg);\n          }\n        }\n      });\n    },\n    onImgLoad(e) {\n      // 当图片加载完成后，获取图片的原始宽度和高度，并根据宽度计算出高度\n      const { width, height } = e.mp.detail;\n      this.imgHeight = (height / width) * 100; // 高度 = 原始高度 / 原始宽度 * 100\n    },\n    // 显示toast\n    showToast(text) {\n      this.$refs.uToast.show({\n        ...text,\n        complete() {\n          // params.url && uni.navigateTo({\n          // \turl: params.url\n          // })\n        },\n      });\n    },\n    // 页面跳转\n    goto(url) {\n      // 判断是否登录，未登录跳转登录页，已登录跳转指定页面\n      if (\n        uni.getStorageSync(\"openID\") == \"\" ||\n        uni.getStorageSync(\"openID\") == undefined ||\n        uni.getStorageSync(\"userID\") == \"\" ||\n        uni.getStorageSync(\"userID\") == undefined\n      ) {\n        // 自有登录页\n        uni.navigateTo({\n          url: \"/pages/business/login/login\",\n        });\n        // // 统一登录页\n        // uni.navigateTo({\n        //   url: \"/uni_modules/uni-id-pages/pages/login/login-withoutpwd?type=weixin\",\n        // });\n        return;\n      } else {\n        uni.navigateTo({\n          url: url,\n        });\n      }\n    },\n    // 分享给微信好友\n    shareFriend() { },\n    // 分享到微信朋友圈\n    shareFriendQuan() { },\n    // 客服\n    customerService() {\n      // 跳转客服\n    },\n    // 查询该师傅用户是否收藏\n    isShowCollected(workerID) {\n      uniCloud.callFunction({\n        name: \"getIsCollectWorkerStatus\",\n        data: {\n          workerID: workerID,\n          openID: uni.getStorageSync(\"openID\"),\n          userID: uni.getStorageSync(\"userID\"),\n          isEnable: true,\n        },\n        success: (res) => {\n          // 判断是否收藏\n          if (res.result.data.isCollected == true) {\n            this.isCollected = true;\n            console.log(\"收藏\");\n          } else {\n            this.isCollected = false;\n            console.log(\"未收藏\");\n          }\n        },\n      });\n    },\n    // 收藏\n    collect() {\n      // 显示遮罩\n      this.overlayShow = true;\n      // 判断当前是否收藏\n      if (this.isCollected == false) {\n        // 收藏\n        uniCloud.callFunction({\n          name: \"collectWorker\",\n          data: {\n            methods: \"addCollectWorker\",\n            openID: uni.getStorageSync(\"openID\"),\n            userID: uni.getStorageSync(\"userID\"),\n            workerID: this.workerID,\n            workerPhoto: this.workerDetailData.workPhoto, // TODO 读取师傅详情数据的头像照片+修改collectWorker.schema.json\n            lifePhoto: this.workerDetailData.lifePhoto,\n            // 的workerImage字段\n          },\n          success: (res) => {\n            // console.log(`addCollect userID :${uni.getStorageSync(\"userID\")}`);\n            this.isCollected = res.result.data.isCollected;\n            // 隐藏遮罩\n            this.overlayShow = false;\n            this.overlayText = \"收藏成功\";\n          },\n          fail: (e) => {\n            // 隐藏遮罩\n            this.overlayShow = false;\n            this.overlayText = \"收藏失败\";\n          },\n        });\n      } else {\n        // 取消收藏\n        uniCloud.callFunction({\n          name: \"collectWorker\",\n          data: {\n            methods: \"deleteCollectWorker\",\n            openID: uni.getStorageSync(\"openID\"),\n            userID: uni.getStorageSync(\"userID\"),\n            workerID: this.workerID,\n          },\n          success: (res) => {\n            this.isCollected = false;\n            // 隐藏遮罩\n            this.overlayShow = false;\n            this.overlayText = \"取消收藏\";\n          },\n          fail: (e) => {\n            // 隐藏遮罩\n            this.overlayShow = false;\n            this.overlayText = \"取消收藏失败\";\n          },\n        });\n      }\n    }, \n    // 加载更多评价\n    loadMoreComments() {\n      if (!this.hasMoreComments) return; // 如果没有更多数据，直接返回\n      this.pageNum += 1; // 增加页码\n      uniCloud.callFunction({\n        name: \"comments\",\n        data: {\n          methods: \"getCommentsWorkerDetail\",\n          workerID: this.workerID,\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n        },\n        success: (res) => {\n          const newComments = res.result.data || [];\n          if (newComments.length < this.pageSize) {\n            this.hasMoreComments = false; // 如果返回的数据小于页大小，说明没有更多数据\n          }\n          this.comments = this.comments.concat(newComments); // 合并新数据\n        },\n        fail: (err) => {\n          console.log(\"getCommentsWorkerDetail err\", err);\n        },\n      });\n    },\n  },\n  watch: {\n    // watch第一次绑定值的时候不会执行监听，修改数据才会触发函数\n    isCollected(newVal, oldVal) {\n      console.log(\"isCollected oldVal:\", oldVal); // coderkey\n      console.log(\"isCollected newVal:\", newVal); // pink\n    },\n  },\n  onLoad(options) {\n    // 接收路由参数\n    this.workerID = options.workerID;\n    console.log(\"options.workerID:\", this.workerID);\n    // 请求工作者详情数据\n    this.getWorkerDetailData(this.workerID);\n    // 请求评价数据\n    this.getCommentsWorkerData(this.workerID);\n\n    //  获取url路由参数\n    var launchOptions = uni.getLaunchOptionsSync();\n    console.log(\"workerDetail onLoad launchOptions\", launchOptions.query);\n    // 存储分享者微信openID\n    uni.setStorageSync(\"sharerInfo\", launchOptions.query);\n    // 获取URL中的参数\n    let query = launchOptions.query;\n    // 判断是否有分享ID\n    if (query.sharerOpenID == undefined || query.sharerOpenID == \"\") {\n      // 没有分享ID\n      console.log(\"没有分享ID\");\n    } else {\n      this.sharerOpenID = query.sharerOpenID;\n      this.shareworkerID = query.workerID;\n      console.log(\"sharerOpenID:\", this.sharerOpenID);\n      console.log(\"shareworkerID\", this.shareworkerID);\n    }\n\n    // 当前页面\n    console.log(`当前页面:workerDetailData`);\n    console.log(\"options.workerID:\", options.workerID);\n    this.workerID = options.workerID;\n\n  },\n  onReachBottom() {\n    this.loadMoreComments(); // 触底加载更多评价\n  },\n  // uniapp微信小程序分享页面到微信好友\n  onShareAppMessage() {\n    //\t读取缓存分享人ID\n    return {\n      title: this.workerDetailData.title,\n      path: `/pages/business/workerDetail/workerDetail?workerID=${this.workerID\n        }&sharerOpenID=${uni.getStorageSync(\"openID\")}`, //分享的页面路径\n    };\n  },\n  // uniapp微信小程序分享页面到微信朋友圈\n  onShareTimeline() {\n    // \t读取缓存分享人ID\n    return {\n      title: this.workerDetailData.title,\n      path: \"/pages/business/workerDetail\",\n      query: `workerID=${this.workerID}&sharerOpenID=${uni.getStorageSync(\n        \"openID\"\n      )}`,\n      imageUrl: this.workerDetailData[\"image\"][\"url\"],\n    };\n  },\n  created() { },\n  mounted() {\n    this.isCollected = false;\n  },\n  destroyed() {\n    this.isCollected = false;\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.custom-style {\n  color: #ff0000;\n  width: 100rpx;\n}\n\n.rect {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.nav {\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #ffffff;\n  height: 110rpx;\n  z-index: 10; // 确保在其他元素之上\n}\n\n\n.title {\n  margin-left: 5%;\n  margin-right: 5%;\n  margin-top: 5%;\n  margin-bottom: 5%;\n  color: black;\n}\n\n.content {\n  color: black;\n  margin-left: 2%;\n  margin-right: 2%;\n  margin-top: 2%;\n  margin-bottom: 1%;\n}\n\n\n.share {\n  color: green;\n  margin-left: 2%;\n  margin-right: 2%;\n  margin-top: 2%;\n  margin-bottom: 2%;\n}\n\n.worker-info {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 30rpx;\n  color: rgb(130, 95, 54);\n\n  .title {\n    white-space: nowrap; // 防止换行\n  }\n}\n\n.workerInfo {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-image: url('/static/image/selftInfoBG.png');\n  background-size: cover;\n  background-position: center;\n  padding: 20px;\n  color: rgb(130, 95, 54);\n  width: 90%;\n  height: 50rpx;\n}\n\n.name-title {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  white-space: nowrap;\n}\n\n.attributes {\n  display: flex;\n  justify-content: space-around;\n  width: 60%;\n  white-space: nowrap;\n}\n\n.img {\n  width: 100%;\n}\n\n.guarantee {\n  background-color: #F3FFFC;\n  margin-bottom: 3rpx;\n  padding: 10px; // 根据需要调整内边距\n  display: flex;\n  align-items: center;\n  height: 40rpx;\n\n  .icon-text {\n    display: flex;\n    align-items: center;\n    margin-right: 10px; // 调整图标和文本之间的间距\n  }\n\n  text {\n    margin-left: 5px; // 调整文本和图标之间的间距\n  }\n}\n\n\n.comment-list {\n  padding: 10px;\n  padding-bottom: 120rpx;\n}\n\n.comment-item {\n  background-color: #fff;\n  margin-bottom: 10px;\n  padding: 10px;\n  // border-radius: 5px;\n  // box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.comment-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.comment-user {\n  font-weight: bold;\n}\n\n.comment-date {\n  color: #999;\n}\n\n.comment-content {\n  margin-top: 5px;\n  font-size: 23rpx;\n}\n\n.comment-tags {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 5px;\n}\n\n.tag {\n  background-color: #f0f0f0;\n  border-radius: 3px;\n  padding: 2px 5px;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  font-size: 12px;\n}\n\n.no-comments {\n  text-align: center;\n  color: #999;\n  font-size: 25rpx;\n  margin-top: 20px;\n}\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./workerDetail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./workerDetail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1743648224039\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}