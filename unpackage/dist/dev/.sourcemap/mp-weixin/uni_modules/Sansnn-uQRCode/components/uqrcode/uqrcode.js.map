{"version":3,"sources":["webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?89a0","webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?7efa","webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?f881","webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?ba40","uni-app:///uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue","webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?e072","webpack:////Users/liyinchi/workspace/前端/Dcolud/tongcheng-worker-miniprogram/uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue?5c66"],"names":["name","props","canvasId","type","required","value","size","default","options","fileType","start","auto","hide","data","canvas","canvasContext","makeDelegate","drawDelegate","toTempFilePathDelegate","makeing","drawing","inError","isH5Save","tempFilePath","templateOptions","width","height","canvasWidth","canvasHeight","canvasDisplay","uqrcodeOptions","makeingPattern","watch","handler","deep","mounted","methods","getTemplateOptions","getUqrcodeOptions","resetCanvas","callback","draw","console","qr","uni","createSelectorQuery","in","select","fields","node","exec","resolve","dpr","UQRCode","img","reject","setTimeout","then","catch","make","clearTimeout","remake","complete","success","toTempFilePath","Math","toString","split","fs","filePath","encoding","fail","save","onClick"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACqC;;;AAG3F;AACyN;AACzN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk3B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACqGt4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA;AAGA;AAAA,gBAMA;EACAA;EACAC;IACA;AACA;AACA;IACAC;MACAC;MACAC;IACA;;IACA;AACA;AACA;IACAC;MACAF;IACA;IACA;AACA;AACA;IACAG;MACAH;MACAI;IACA;IACA;AACA;AACA;IACAC;MACAL;MACAI;QACA;MACA;IACA;IACA;AACA;AACA;IACAE;MACAN;MACAI;IACA;IACA;AACA;AACA;IACAG;MACAP;MACAI;IACA;IACA;AACA;AACA;IACAI;MACAR;MACAI;IACA;IACA;AACA;AACA;IACAK;MACAT;MACAI;IACA;EACA;EACAM;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QAAA;QACAC;QACAC;QAAA;QACAC;QACAC;MACA;MACAC;QACAjB;MACA;MACAkB,iBACA,CACA,kEACA,kEACA,kEACA,kEACA,kEACA,kEACA,kEACA,8DACA,8DACA,6DACA,EACA,CACA,8DACA,8DACA,8DACA,kEACA,kEACA,kEACA,qEACA,+DACA,+DACA,8DACA,EACA,CACA,8DACA,8DACA,8DACA,kEACA,kEACA,iEACA,iEACA,iEACA,kEACA,iEACA,EACA,CACA,8DACA,8DACA,8DACA,qEACA,qEACA,qEACA,qEACA,8DACA,8DACA,6DACA;IAEA;EACA;EACAC;IACA3B;MACA4B;QACA;UACA;QACA;MACA;IACA;IACA3B;MACA2B;QACA;UACA;QACA;MACA;IACA;IACAzB;MACAyB;QACA;UACA;QACA;MACA;MACAC;IACA;IACAf;MACAc;QACA;UACA;YACA;UACA;QACA;MACA;IACA;EACA;EACAE;IACA;IACA;IACA;MACA;IACA;EACA;EACAC;IACA;AACA;AACA;IACAC;MACA;QACAZ;QACAC;MACA;IACA;IACA;AACA;AACA;IACAY;MACA;QACAzB;QACAP;MACA;IACA;IACA;AACA;AACA;IACAiC;MAAA;MACA;MACA;QACA;QACA;UACAC;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAD;gBACA;kBACA;oBACA;kBACA;gBACA;gBACA;gBAEA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAE;gBACA;gBACAF;gBAAA;cAAA;gBAAA,IAGA;kBAAA;kBAAA;gBAAA;gBACAE;gBACA;gBACAF;gBAAA;cAAA;gBAIA;gBACA;gBACA;gBACA;gBACA;gBACA;kBACA;gBACA;gBACA;;gBAEA;kBACA;gBACA;;gBAMA;gBACAG;gBACA;gBACAA;gBACA;gBACAA;;gBAEA;;gBAuBA;gBAAA;gBAAA,OACA;kBACAC,IACAC,sBACAC;kBAAA,CACAC,oCACAC;oBACAC;oBACA3C;kBACA,GACA4C;oBACAC;kBACA;gBACA;cAAA;gBAZArC;gBAaAC;gBACA;gBACA;gBACA;gBACA;gBACAqC;gBACAtC;gBACAA;gBACAC;gBACA;gBACAsC;kBACA;kBACA;oBACA;oBACAC;oBACAA;sBACAH;oBACA;oBACAG;sBACAC;oBACA;kBACA;gBACA;;gBA0BA;gBACAZ;gBACA;gBACAa;kBACA;kBACAb,gBACAc;oBACA;sBACA;sBACA;sBACA;oBACA;sBACA;sBACAjB;oBACA;kBACA,GACAkB;oBACA;sBACA;sBACA;oBACA;sBACA;sBACA;sBACAlB;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;AACA;AACA;IACAmB;MAAA;MACA;MACA;QACAC;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;MAAA;MACAN;QACA;UACAO;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;MAAA;MACA;QACAxB;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MAEA;QACA;QACA;UACA;QACA;QACA;MACA;QACA;MACA;;MAwBA;MACA;MAKA;MAEA;MACA,6FACAyB,cACAC,WACAC,sBACA;MACAC;QACAC;QAAA;QACAxD;QAAA;QACAyD;QACAP;UACAvB;YACAjB;UACA;QACA;QACAgD;UACA/B;QACA;QACAsB;UACAtB;QACA;MACA;IAWA;IACA;AACA;AACA;IACAgC;MAAA;MACA;QACAhC;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MAEA;QACAuB;UAEAnB;YACAyB;YACAN;cACAvB;YACA;YACA+B;cACA/B;YACA;YACAsB;cACAtB;YACA;UACA;QAkBA;QACA+B;UACA/B;UACAA;QACA;MACA;IACA;IACA;AACA;AACA;IACAiC;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;AChpBA;AAAA;AAAA;AAAA;AAAywC,CAAgB,0nCAAG,EAAC,C;;;;;;;;;;;ACA7xC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./uqrcode.vue?vue&type=template&id=b7042062&scoped=true&\"\nvar renderjs\nimport script from \"./uqrcode.vue?vue&type=script&lang=js&\"\nexport * from \"./uqrcode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uqrcode.vue?vue&type=style&index=0&id=b7042062&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b7042062\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uqrcode.vue?vue&type=template&id=b7042062&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uqrcode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uqrcode.vue?vue&type=script&lang=js&\"","<!-- ---------------------------------------------------------------------\n// uQRCode二维码生成插件 v3.5.1\n// \n// uQRCode是一款基于Javascript环境开发的二维码生成插件，适用所有Javascript运行环境的前端应用和Node.js。\n// \n// Copyright (c) Sansnn uQRCode All rights reserved.\n// \n// Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\n// \n// github地址：\n//   https://github.com/Sansnn/uQRCode\n// \n// npm地址：\n//   https://www.npmjs.com/package/@uqrcode/uni-app\n// \n// uni-app插件市场地址：\n//   https://ext.dcloud.net.cn/plugin?id=1287\n// \n// 复制使用请保留本段注释，感谢支持开源！\n// \n--------------------------------------------------------------------- -->\n<template>\n  <view class=\"uqrcode\" :class=\"{ 'uqrcode-hide': hide }\" :style=\"{ width: `${templateOptions.width}px`, height: `${templateOptions.height}px` }\">\n    <!-- 画布 -->\n    <!-- #ifndef MP-WEIXIN || APP-NVUE -->\n    <canvas\n      class=\"uqrcode-canvas\"\n      :id=\"canvasId\"\n      :canvas-id=\"canvasId\"\n      :style=\"{\n        width: `${templateOptions.canvasWidth}px`,\n        height: `${templateOptions.canvasHeight}px`,\n        transform: `scale(${size / templateOptions.canvasWidth}, ${size / templateOptions.canvasHeight})`\n      }\"\n      @click=\"onClick\"\n      v-if=\"templateOptions.canvasDisplay\"\n    ></canvas>\n    <!-- #endif -->\n\n    <!-- 微信小程序非2d模式不支持transform所以使用canvas2d -->\n    <!-- #ifdef MP-WEIXIN -->\n    <canvas\n      class=\"uqrcode-canvas\"\n      type=\"2d\"\n      :id=\"canvasId\"\n      :canvas-id=\"canvasId\"\n      :style=\"{\n        width: `${templateOptions.canvasWidth}px`,\n        height: `${templateOptions.canvasHeight}px`\n      }\"\n      @click=\"onClick\"\n      v-if=\"templateOptions.canvasDisplay\"\n    ></canvas>\n    <!-- #endif -->\n\n    <!-- nvue用gcanvas -->\n    <!-- #ifdef APP-NVUE -->\n    <gcanvas\n      class=\"uqrcode-canvas\"\n      ref=\"gcanvas\"\n      :style=\"{\n        width: `${templateOptions.canvasWidth}px`,\n        height: `${templateOptions.canvasHeight}px`\n      }\"\n      @click=\"onClick\"\n      v-if=\"templateOptions.canvasDisplay\"\n    ></gcanvas>\n    <!-- #endif -->\n\n    <!-- H5保存提示 -->\n    <!-- #ifdef H5 -->\n    <view class=\"uqrcode-h5-save\" v-if=\"isH5Save\">\n      <image class=\"uqrcode-h5-save-image\" :src=\"tempFilePath\"></image>\n      <text class=\"uqrcode-h5-save-text\">若保存失败，请长按二维码进行保存</text>\n      <view class=\"uqrcode-h5-save-close\" @click=\"isH5Save = false\">\n        <view class=\"uqrcode-h5-save-close-before\"></view>\n        <view class=\"uqrcode-h5-save-close-after\"></view>\n      </view>\n    </view>\n    <!-- #endif -->\n\n    <!-- 加载效果，可在此替换 -->\n    <view class=\"uqrcode-makeing\" v-if=\"makeing\">\n      <image\n        class=\"uqrcode-makeing-image\"\n        :style=\"{ width: `${size / 4}px`, height: `${size / 4}px` }\"\n        src=\"data:image/gif;base64,R0lGODlhAAEAAfIEAOHh4SSsWuDg4N3d3f///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDQ4OCwgMjAyMC8wNy8xMC0yMjowNjo1MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyODhGMzM4RDEwMTExRUM4MDhCRkVBQkE2QUZDQzkwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyODhGMzM5RDEwMTExRUM4MDhCRkVBQkE2QUZDQzkwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4OEYzMzZEMTAxMTFFQzgwOEJGRUFCQTZBRkNDOTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDI4OEYzMzdEMTAxMTFFQzgwOEJGRUFCQTZBRkNDOTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQ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\"\n      ></image>\n    </view>\n\n    <!-- 错误处理，可在此替换 -->\n    <view class=\"uqrcode-error\" v-if=\"inError\"><text class=\"uqrcode-error-message\">Error, see console.</text></view>\n  </view>\n</template>\n\n<script>\r\n// #ifdef VUE3\r\nimport { toRaw } from 'vue';\r\n// #endif\r\n\t\n/* 引入uQRCode核心js */\nimport UQRCode from '../../js_sdk/uqrcode';\n\n/* 引入nvue所需模块 */\n// #ifdef APP-NVUE\nimport { enable, WeexBridge } from '../../js_sdk/gcanvas';\nconst modal = weex.requireModule('modal');\n// #endif\n\nexport default {\n  name: 'uqrcode',\n  props: {\n    /**\n     * canvas组件id\n     */\n    canvasId: {\n      type: String,\n      required: true // canvasId在微信小程序初始值不能为空，created中赋值也不行，必须给一个值，否则挂载组件后无法绘制\n    },\n    /**\n     * 二维码内容\n     */\n    value: {\n      type: [String, Number]\n    },\n    /**\n     * 二维码大小\n     */\n    size: {\n      type: [String, Number],\n      default: 200\n    },\n    /**\n     * 选项\n     */\n    options: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * 导出的文件类型\n     */\n    fileType: {\n      type: String,\n      default: 'png'\n    },\n    /**\n     * 是否初始化组件后就开始生成\n     */\n    start: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否数据发生改变自动重绘\n     */\n    auto: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * 隐藏组件\n     */\n    hide: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      canvas: undefined,\n      canvasContext: undefined,\n      makeDelegate: undefined,\n      drawDelegate: undefined,\n      toTempFilePathDelegate: undefined,\n      makeing: false,\n      drawing: false,\n      inError: false,\n      isH5Save: false,\n      tempFilePath: '',\n      templateOptions: {\n        width: 0, // 组件宽度\n        height: 0,\n        canvasWidth: 0, // canvas宽度\n        canvasHeight: 0,\n        canvasDisplay: false\n      },\n      uqrcodeOptions: {\n        data: ''\n      },\n      makeingPattern: [\n        [\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true]\n        ],\n        [\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, false, false, false],\n          [true, true, true, true, true, true, false, true, true, true],\n          [true, true, true, true, true, true, false, true, true, true],\n          [true, true, true, true, true, true, false, true, true, true]\n        ],\n        [\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, true, true, true, true, false, false, false],\n          [true, true, true, true, true, true, true, false, false, false],\n          [true, true, true, true, true, true, true, false, false, false],\n          [true, true, true, false, false, false, false, true, true, true],\n          [true, true, true, false, false, false, false, true, true, true]\n        ],\n        [\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, false, false, false, false, false, false, false],\n          [true, true, true, false, false, false, false, false, false, false],\n          [true, true, true, false, false, false, false, false, false, false],\n          [true, true, true, false, false, false, false, false, false, false],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true],\n          [true, true, true, true, true, true, true, true, true, true]\n        ]\n      ]\n    };\n  },\n  watch: {\n    value: {\n      handler() {\n        if (this.auto) {\n          this.remake();\n        }\n      }\n    },\n    size: {\n      handler() {\n        if (this.auto) {\n          this.remake();\n        }\n      }\n    },\n    options: {\n      handler() {\n        if (this.auto) {\n          this.remake();\n        }\n      },\n      deep: true\n    },\n    makeing: {\n      handler(val) {\n        if (!val) {\n          if (typeof this.toTempFilePathDelegate === 'function') {\n            this.toTempFilePathDelegate();\n          }\n        }\n      }\n    }\n  },\n  mounted() {\n    this.templateOptions.canvasWidth = this.size;\n    this.templateOptions.canvasHeight = this.size;\n    if (this.start) {\n      this.make();\n    }\n  },\n  methods: {\n    /**\n     * 获取模板选项\n     */\n    getTemplateOptions() {\n      return UQRCode.deepReplace(this.templateOptions, {\n        width: this.size,\n        height: this.size\n      });\n    },\n    /**\n     * 获取插件选项\n     */\n    getUqrcodeOptions() {\n      return UQRCode.deepReplace(this.options, {\n        data: String(this.value),\n        size: Number(this.size)\n      });\n    },\n    /**\n     * 重置画布\n     */\n    resetCanvas(callback) {\n      this.templateOptions.canvasDisplay = false;\n      this.$nextTick(() => {\n        this.templateOptions.canvasDisplay = true;\n        this.$nextTick(() => {\n          callback && callback();\n        });\n      });\n    },\n    /**\n     * 绘制二维码\n     */\n    async draw(callback = success => {}) {\n      if (this.drawing) {\n        this.drawDelegate = () => {\n          this.draw(callback);\n        };\n      }\n      this.drawing = true;\n\n      this.inError = false;\n      if (!this.canvasId) {\n        console.error('[uQRCode]: canvasId must be set!');\n        this.inError = true;\n        callback(false);\n        return;\n      }\n      if (!this.value) {\n        console.error('[uQRCode]: value must be set!');\n        this.inError = true;\n        callback(false);\n        return;\n      }\n\n      /* 组件数据 */\n      this.templateOptions = this.getTemplateOptions();\n      /* uQRCode选项 */\n      this.uqrcodeOptions = this.getUqrcodeOptions();\n      /* 纠错等级兼容字母写法 */\n      if (typeof this.uqrcodeOptions.errorCorrectLevel === 'string') {\n        this.uqrcodeOptions.errorCorrectLevel = UQRCode.errorCorrectLevel[this.uqrcodeOptions.errorCorrectLevel];\n      }\n      /* nvue不支持动态修改gcanvas尺寸，除nvue外，默认使用useDynamicSize */\n      // #ifndef APP-NVUE\n      if (typeof this.options.useDynamicSize === 'undefined') {\n        this.uqrcodeOptions.useDynamicSize = true;\n      }\n      // #endif\n      // #ifdef APP-NVUE\n      this.uqrcodeOptions.useDynamicSize = false;\n      // #endif\n\n      /* 获取uQRCode实例 */\n      const qr = new UQRCode();\n      /* 设置uQRCode选项 */\n      qr.setOptions(this.uqrcodeOptions);\n      /* 调用制作二维码方法 */\n      qr.make();\n\n      /* 获取canvas上下文 */\n      // #ifndef MP-WEIXIN || APP-NVUE\n      /* uniapp获取canvas上下文方式 */\n      const canvasContext = (this.canvasContext = uni.createCanvasContext(this.canvasId, this));\n      /* 使用dynamicSize，可以解决小块间出现白线问题，再通过scale缩放至size，使其达到所设尺寸 */\n      this.templateOptions.canvasWidth = qr.dynamicSize;\n      this.templateOptions.canvasHeight = qr.dynamicSize;\n      /* uniapp获取图像方式 */\n      UQRCode.loadImage = function(src) {\n        return new Promise((resolve, reject) => {\n          uni.getImageInfo({\n            src,\n            success: res => {\n              resolve(res.path);\n            },\n            fail: err => {\n              reject(err);\n            }\n          });\n        });\n      };\n      // #endif\n      // #ifdef MP-WEIXIN\n      /* 微信小程序获取canvas上下文方式 */\n      const canvas = (this.canvas = await new Promise(resolve => {\n        uni\n          .createSelectorQuery()\n          .in(this) // 在组件内使用需要\n          .select(`#${this.canvasId}`)\n          .fields({\n            node: true,\n            size: true\n          })\n          .exec(res => {\n            resolve(res[0].node);\n          });\n      }));\n      const canvasContext = (this.canvasContext = canvas.getContext('2d'));\n      /* 2d的组件设置宽高与实际canvas绘制宽高不是一个，打个比方，组件size=200，canvas.width设置为100，那么绘制出来就是100=200，组件size=400，canvas.width设置为800，绘制大小还是800=400，所以无需理会下方返回的dynamicSize是多少，按dpr重新赋值给canvas即可 */\n      this.templateOptions.canvasWidth = qr.size;\n      this.templateOptions.canvasHeight = qr.size;\n      /* 使用dynamicSize+scale，可以解决小块间出现白线问题，dpr可以解决模糊问题 */\n      const dpr = uni.getSystemInfoSync().pixelRatio;\n      canvas.width = qr.dynamicSize * dpr;\n      canvas.height = qr.dynamicSize * dpr;\n      canvasContext.scale(dpr, dpr);\n      /* 微信小程序获取图像方式 */\n      UQRCode.loadImage = function(src) {\n        /* 小程序下获取网络图片信息需先配置download域名白名单才能生效 */\n        return new Promise((resolve, reject) => {\n          const img = canvas.createImage();\n          img.src = src;\n          img.onload = () => {\n            resolve(img);\n          };\n          img.onerror = err => {\n            reject(err);\n          };\n        });\n      };\n      // #endif\n      // #ifdef APP-NVUE\n      /* NVue获取canvas上下文方式 */\n      const gcanvas = this.$refs['gcanvas'];\n      const canvas = enable(gcanvas, {\n        bridge: WeexBridge\n      });\n      const canvasContext = (this.canvasContext = canvas.getContext('2d'));\n      /* NVue获取图像方式 */\n      UQRCode.loadImage = function(src) {\n        return new Promise((resolve, reject) => {\n          /* getImageInfo在nvue的bug：获取同一个路径的图片信息，同一时间第一次获取成功，后续失败，猜测是写入本地时产生文件写入冲突，所以没有返回，特别是对于网络资源 --- js部分已实现队列绘制，已解决此问题 */\n          uni.getImageInfo({\n            src,\n            success: res => {\n              resolve(res.path);\n            },\n            fail: err => {\n              reject(err);\n            }\n          });\n        });\n      };\n      // #endif\n\n      /* 设置uQRCode实例的canvas上下文 */\n      qr.canvasContext = canvasContext;\n      /* 延时等待页面重新绘制完毕 */\n      setTimeout(() => {\n        /* 调用绘制方法将二维码图案绘制到canvas上 */\n        qr.drawCanvas()\n          .then(() => {\n            if (this.drawDelegate) {\n              /* 高频重绘纠正 */\n              this.drawDelegate();\n              this.drawDelegate = undefined;\n            } else {\n              this.drawing = false;\n              callback(true);\n            }\n          })\n          .catch(() => {\n            if (this.drawDelegate) {\n              this.drawDelegate();\n              this.drawDelegate = undefined;\n            } else {\n              this.inError = true;\n              this.drawing = false;\n              callback(false);\n            }\n          });\n      }, 300);\n    },\n    /**\n     * 生成二维码\n     */\n    make() {\n      this.makeing = true;\n      this.resetCanvas(() => {\n        clearTimeout(this.makeDelegate);\n        this.makeDelegate = setTimeout(() => {\n          this.draw(res => {\n            this.makeing = false;\n            this.complete(res);\n          });\n        }, 300);\n      });\n    },\n    /**\n     * 重新生成\n     */\n    remake() {\n      this.make();\n    },\n    /**\n     * 生成完成\n     */\n    complete(success = true) {\n      setTimeout(() => {\n        this.$emit('complete', {\n          success\n        });\n      }, 300);\n    },\n    /**\n     * 导出临时路径\n     */\n    toTempFilePath(callback = {}) {\n      if (typeof callback.success != 'function') {\n        callback.success = () => {};\n      }\n      if (typeof callback.fail != 'function') {\n        callback.fail = () => {};\n      }\n      if (typeof callback.complete != 'function') {\n        callback.complete = () => {};\n      }\n\n      if (this.makeing) {\n        /* 如果还在生成状态，那当前操作将托管到委托，监听生成完成后再通过委托复调当前方法 */\n        this.toTempFilePathDelegate = () => {\n          this.toTempFilePath(callback);\n        };\n        return;\n      } else {\n        this.toTempFilePathDelegate = null;\n      }\n\n      // #ifndef MP-WEIXIN || APP-NVUE\n      uni.canvasToTempFilePath(\n        {\n          canvasId: this.canvasId,\n          fileType: this.fileType,\n          width: this.templateOptions.canvasWidth,\n          height: this.templateOptions.canvasHeight,\n          success: res => {\n            callback.success(res);\n          },\n          fail: err => {\n            callback.fail(err);\n          },\n          complete: () => {\n            callback.complete();\n          }\n        },\n        this\n      );\n      // #endif\n\n      // #ifdef MP-WEIXIN\n      /* 需要将 data:image/png;base64, 这段去除 writeFile 才能正常打开文件，否则是损坏文件，无法打开*/\n      const reg = new RegExp('^data:image/png;base64,', 'g');\r\n\t  // #ifdef VUE3\n      const dataURL = toRaw(this.canvas).toDataURL().replace(reg, '');\r\n\t  // #endif\r\n\t  // #ifndef VUE3\r\n\t  const dataURL = this.canvas.toDataURL().replace(reg, '');\r\n\t  // #endif\n      const fs = wx.getFileSystemManager();\n      const tempFilePath = `${wx.env.USER_DATA_PATH}/${new Date().getTime()}${\n        Math.random()\n          .toString()\n          .split('.')[1]\n      }.png`;\n      fs.writeFile({\n        filePath: tempFilePath, // 要写入的文件路径 (本地路径)\n        data: dataURL, // base64图片\n        encoding: 'base64',\n        success: res => {\n          callback.success({\n            tempFilePath\n          });\n        },\n        fail: err => {\n          callback.fail(err);\n        },\n        complete: () => {\n          callback.complete();\n        }\n      });\n      // #endif\n\n      // #ifdef APP-NVUE\n      /* 测试过程中，size需要乘以3才能保存完整，3又对应dpr，猜测是与像素比有关，故乘以3。第一次运行无法保存，后续正常，待排查。 */\n      const dpr = uni.getSystemInfoSync().pixelRatio;\n      this.canvasContext.toTempFilePath(0, 0, this.size * dpr, this.size * dpr, this.size * dpr, this.size * dpr, '', 1, res => {\n        callback.success(res);\n        callback.complete(res);\n      });\n      // #endif\n    },\n    /**\n     * 保存\n     */\n    save(callback = {}) {\n      if (typeof callback.success != 'function') {\n        callback.success = () => {};\n      }\n      if (typeof callback.fail != 'function') {\n        callback.fail = () => {};\n      }\n      if (typeof callback.complete != 'function') {\n        callback.complete = () => {};\n      }\n\n      this.toTempFilePath({\n        success: res => {\n          // #ifndef H5\n          uni.saveImageToPhotosAlbum({\n            filePath: res.tempFilePath,\n            success: res1 => {\n              callback.success(res1);\n            },\n            fail: err1 => {\n              callback.fail(err1);\n            },\n            complete: () => {\n              callback.complete();\n            }\n          });\n          // #endif\n\n          // #ifdef H5\n          /* 可以在电脑浏览器下载，移动端iOS不行，安卓微信浏览器不行，安卓外部浏览器可以 */\n          this.isH5Save = true;\n          this.tempFilePath = res.tempFilePath;\n          const aEle = document.createElement('a');\n          aEle.download = 'uQRCode'; // 设置下载的文件名，默认是'下载'\n          aEle.href = res.tempFilePath;\n          document.body.appendChild(aEle);\n          aEle.click();\n          aEle.remove(); // 下载之后把创建的元素删除\n          callback.success({\n            errMsg: 'ok'\n          });\n          callback.complete();\n          // #endif\n        },\n        fail: err => {\n          callback.fail(err);\n          callback.complete();\n        }\n      });\n    },\n    /**\n     * 注册click事件\n     */\n    onClick(e) {\n      this.$emit('click', e);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.uqrcode {\n  position: relative;\n}\n\n.uqrcode-hide {\n  position: fixed;\n  left: 7500rpx;\n}\n\n.uqrcode-canvas {\n  transform-origin: top left;\n}\n\n.uqrcode-makeing {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 10;\n  /* #ifndef APP-NVUE */\n  display: flex;\n  /* #endif */\n  justify-content: center;\n  align-items: center;\n}\n\n.uqrcode-makeing-image {\n  /* #ifndef APP-NVUE */\n  display: block;\n  max-width: 120px;\n  max-height: 120px;\n  /* #endif */\n}\n\n.uqrcode-error {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  /* #ifndef APP-NVUE */\n  display: flex;\n  /* #endif */\n  justify-content: center;\n  align-items: center;\n}\n\n.uqrcode-error-message {\n  font-size: 12px;\n  color: #939291;\n}\n\n/* #ifdef H5 */\n.uqrcode-h5-save {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 100;\n  background-color: rgba(0, 0, 0, 0.68);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.uqrcode-h5-save-image {\n  width: 512rpx;\n  height: 512rpx;\n  padding: 32rpx;\n}\n\n.uqrcode-h5-save-text {\n  margin-top: 20rpx;\n  font-size: 32rpx;\n  font-weight: 700;\n  color: #ffffff;\n}\n\n.uqrcode-h5-save-close {\n  position: relative;\n  margin-top: 72rpx;\n  width: 40rpx;\n  height: 40rpx;\n  border: 2rpx solid #ffffff;\n  border-radius: 40rpx;\n  padding: 10rpx;\n}\n\n.uqrcode-h5-save-close-before {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%) rotate(45deg);\n  width: 40rpx;\n  height: 4rpx;\n  background: #ffffff;\n}\n\n.uqrcode-h5-save-close-after {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%) rotate(-45deg);\n  width: 40rpx;\n  height: 4rpx;\n  background: #ffffff;\n}\n\n/* #endif */\n</style>\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uqrcode.vue?vue&type=style&index=0&id=b7042062&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uqrcode.vue?vue&type=style&index=0&id=b7042062&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1678935641988\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}